{"title":"4 模板","slug":"flask/4 模板","date":"2021-01-18T09:01:48.499Z","updated":"2021-01-18T14:58:34.840Z","comments":true,"path":"api/articles/flask/4 模板.json","excerpt":null,"covers":["https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009223915946-663464213.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009223931005-1760450460.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224004911-166391160.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224123798-1986402937.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224523335-324667031.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224539789-1105569436.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224646066-395309950.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224713780-683001332.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224733161-1381972809.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224837066-1563439545.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224930155-537702019.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224943631-369191930.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225037822-1675072108.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225132760-1032846285.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225302972-923905323.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225414778-1619324382.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225508108-1219527274.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225741600-1999590365.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225759151-1622451818.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225817440-1326379837.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225902851-1504075500.png","https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225944998-1472473367.png"],"content":"<h2 id=\"41-重定向\"><a class=\"markdownIt-Anchor\" href=\"#41-重定向\"></a> 4.1 重定向</h2>\n<h3 id=\"411-两种重定向\"><a class=\"markdownIt-Anchor\" href=\"#411-两种重定向\"></a> 4.1.1 两种重定向</h3>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>http状态码</th>\n<th>应用场景</th>\n<th>优势</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>暂时性重定向</td>\n<td>302</td>\n<td>访问一些需要权限的页面，会自动重定向到权限认证的页面</td>\n<td>重定向在设计上会提升用户体验</td>\n</tr>\n<tr>\n<td>永久性重定向</td>\n<td>301</td>\n<td>废弃原有的网址被访问，会自动重定向到新的网址确保用户访问成功</td>\n<td>重定向在设计上会提升用户体验，有利于搜索引擎优化</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"412-使用重定向\"><a class=\"markdownIt-Anchor\" href=\"#412-使用重定向\"></a> 4.1.2 使用重定向</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask,redirect</span><br></pre></td></tr></table></figure>\n<h4 id=\"4121-暂时性重定向\"><a class=\"markdownIt-Anchor\" href=\"#4121-暂时性重定向\"></a> 4.1.2.1 暂时性重定向</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask,redirect</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/user_info/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">user_info</span>():</span></span><br><span class=\"line\">    name = request.args.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    pwd = request.args.get(<span class=\"string\">&#x27;pwd&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> name==<span class=\"string\">&#x27;mark&#x27;</span> <span class=\"keyword\">and</span> pwd == <span class=\"string\">&#x27;123&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#123;&#125;的信息&#x27;</span>.<span class=\"built_in\">format</span>(name)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> redirect(<span class=\"string\">&#x27;/login/&#x27;</span>)  <span class=\"comment\"># 可以换成 return redirect(url_for(&#x27;login&#x27;))</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;这是登录页面&#x27;</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p><em>没有通过权限验证的情况</em></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009223915946-663464213.png\" alt=\"\" /></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009223931005-1760450460.png\" alt=\"\" /></p>\n<p><em>通过权限验证的情况</em></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224004911-166391160.png\" alt=\"\" /></p>\n<h4 id=\"4122-永久性重定向\"><a class=\"markdownIt-Anchor\" href=\"#4122-永久性重定向\"></a> 4.1.2.2 永久性重定向</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask,redirect</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/user_info/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">user_info</span>():</span></span><br><span class=\"line\">    name = request.args.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    pwd = request.args.get(<span class=\"string\">&#x27;pwd&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> name==<span class=\"string\">&#x27;mark&#x27;</span> <span class=\"keyword\">and</span> pwd == <span class=\"string\">&#x27;123&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#123;&#125;的信息&#x27;</span>.<span class=\"built_in\">format</span>(name)</span><br><span class=\"line\">   <span class=\"keyword\">return</span> redirect(<span class=\"string\">&#x27;/login/&#x27;</span>, code=<span class=\"number\">301</span>)  <span class=\"comment\"># 会返回301状态码给浏览器 </span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;这是登录页面&#x27;</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p><strong>注</strong>：永久性重定向只给<code>redirect('/login/', code=301)</code>多加了个<code>code=301</code>参数</p>\n<hr />\n<h2 id=\"42-jinja2引擎模板\"><a class=\"markdownIt-Anchor\" href=\"#42-jinja2引擎模板\"></a> 4.2 jinja2引擎模板</h2>\n<h3 id=\"421-在flask如何使用模板引擎\"><a class=\"markdownIt-Anchor\" href=\"#421-在flask如何使用模板引擎\"></a> 4.2.1 在<code>Flask</code>如何使用模板引擎？</h3>\n<p><code>Flask</code>使用<code>jinja2</code>作为框架的默认模板引擎，<code>Jinja2</code>是基于<code>python</code>的模板引擎，功能比较类似于于<code>PHP</code>的<code>smarty</code>，<code>J2ee</code>的<code>Freemarker</code>和<code>velocity</code>。<code>Jinja2</code>除了设置变量，还允许我们在模板中添加if判断，执行for迭代，调用函数等，以各种方式控制模板的输出。并且<code>jinja2</code>不限制模板的格式为<code>html</code>，可以是任何格式的文本文件。</p>\n<h4 id=\"4211-模板引擎返回对比视图函数直接返回html代码\"><a class=\"markdownIt-Anchor\" href=\"#4211-模板引擎返回对比视图函数直接返回html代码\"></a> 4.2.1.1 模板引擎返回对比视图函数直接返回html代码</h4>\n<p><strong>项目目录</strong></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224123798-1986402937.png\" alt=\"\" /></p>\n<p><strong>项目代码</strong></p>\n<p>**（1）login01.html **</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>登录界面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>login01<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span>  <span class=\"comment\">&lt;!--login02.html文件的这一行的内容是：‘ &lt;h1&gt;login02&lt;/h1&gt; ’  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span>&gt;</span></span><br><span class=\"line\">    用户：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span>&gt;</span></span><br><span class=\"line\">    密码：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>(2)login02.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>登录界面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>login01<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span>  <span class=\"comment\">&lt;!--login02.html文件的这一行的内容是：‘ &lt;h1&gt;login02&lt;/h1&gt; ’  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span>&gt;</span></span><br><span class=\"line\">    用户：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span>&gt;</span></span><br><span class=\"line\">    密码：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>(3) <a href=\"http://server.py\">server.py</a></strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, render_template</span><br><span class=\"line\"><span class=\"keyword\">import</span> config</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">app.config.from_object(config)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&lt;h2&gt;手写html&lt;/h2&gt;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo02/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo02</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#x27;&#x27;&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;html lang=&quot;en&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;head&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;title&gt;登录界面&lt;/title&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/head&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;!--&lt;form action=&quot;/login_request/&quot; method=&quot;POST&quot;&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;form action=&quot;&quot; method=&quot;POST&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    用户：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    密码：&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/form&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/html&gt;&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo03/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo03</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;login01.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo04/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo04</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;box/login02.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n<p><strong>server.py代码逻辑分析</strong>：</p>\n<ul>\n<li>demo函数 和 demo02函数证明直接返回html代码可渲染浏览器</li>\n<li>demo03 证明利用模板引擎 实现了业务逻辑和页面逻辑的分离，减轻了开发的复杂度</li>\n<li>demo04 证明了 <code>render_template('box/login02.html')</code>的路径是templates文件夹的相对路径</li>\n</ul>\n<hr />\n<h4 id=\"4212-修改默认模板引擎寻求路径\"><a class=\"markdownIt-Anchor\" href=\"#4212-修改默认模板引擎寻求路径\"></a> 4.2.1.2 修改默认模板引擎寻求路径</h4>\n<p>Flask类中的<code>template_folder</code>参数可以指定模板寻找路径</p>\n<p>基于上2.3.1的项目</p>\n<ol>\n<li>现在把templates中的文件复制到 <code>C:/Users/Administrator/Desktop/template_box</code>中，并且删除项目中的templates的文件。</li>\n<li>修改server.py中<code>app = Flask(__name__)</code>为<code>app = Flask(__name__,template_folder='C:/Users/Administrator/Desktop/template_box')</code></li>\n</ol>\n<p><strong>分析:</strong></p>\n<p>渲染一切正常 说明Flask类中的<code>template_folder</code>参数可以指定模板寻找路径。</p>\n<hr />\n<h4 id=\"4213-模板引擎传参\"><a class=\"markdownIt-Anchor\" href=\"#4213-模板引擎传参\"></a> 4.2.1.3 模板引擎传参</h4>\n<p>我们之前提到过，模板引擎还可以读取并执行模板中的特殊语法标记，并根据传入的数据将变量替换为实际值，这个步骤我们就称之为模板引擎传参。</p>\n<p>我们传参的时候要应用<code>render_template()</code>利用render_template的第二个参数进行传参，该函数在定义时候，第二个参数是可变长形参，所以在传值的时候我们可以传入多个关键字实参。</p>\n<p>在模板中接收的时候使用<code>&#123;&#123;&#125;&#125;`包裹参数进行接收。\n\n![](https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224222394-1528143259.jpg)\n\n###### 示例1（第一种传参方式）：\n\n* **目录结构**\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">        index.html</span><br></pre></td></tr></table></figure>\n* **server.py**\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,name=<span class=\"string\">&quot;mark&quot;</span>,age=<span class=\"number\">18</span>)</span><br></pre></td></tr></table></figure>\n* **index.html**\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板传参<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;name&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;age&#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n![](https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224255518-247003677.png)\n\n\n\n###### 示例2（第二种传参方式）：\n\n* **目录结构**：同上\n\n* **server.py**\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo1/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo1</span>():</span></span><br><span class=\"line\">    context_dict = &#123;<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;mark&quot;</span>,</span><br><span class=\"line\">               <span class=\"string\">&quot;age&quot;</span>:<span class=\"string\">&quot;mark&quot;</span>,</span><br><span class=\"line\">               <span class=\"string\">&quot;sex&quot;</span>:<span class=\"string\">&quot;girl&quot;</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,context_dict = context_dict)</span><br></pre></td></tr></table></figure>\n* **index.html**\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板传参<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;context_dict.name&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;context_dict.age&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;context_dict.sex&#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n![](https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224349511-583920666.png)\n\n\n\n###### 示例3（第三种传参方式）：\n\n* **目录结构**：同上\n\n* **server.py**\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo2</span>():</span></span><br><span class=\"line\">    context_dict = &#123;<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;mark&quot;</span>,</span><br><span class=\"line\">               <span class=\"string\">&quot;age&quot;</span>: <span class=\"string\">&quot;mark&quot;</span>,</span><br><span class=\"line\">               <span class=\"string\">&quot;sex&quot;</span>: <span class=\"string\">&quot;girl&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;other_info&quot;</span>:&#123;<span class=\"string\">&quot;tel&quot;</span>:<span class=\"number\">1365</span>,</span><br><span class=\"line\">                               <span class=\"string\">&quot;qq&quot;</span>:<span class=\"number\">565656</span>&#125;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict)</span><br></pre></td></tr></table></figure>\n* **index.html**\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板传参<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;name&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;age&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;sex&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;other_info.tel&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;other_info[&quot;qq&quot;]&#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n![](https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224455972-1435542843.png)\n\n**注**：\n\n在视图函数中\n\n- render_template传参的时候以关键字实参进行传参。可以传多个，可以用**讲字典打散成关键字实参。\n\n在模板中\n\n- jinja2模板引擎支持接收变量在用 `&#123;&#123;&#125;&#125;</code>包裹参数进行接收</p>\n<ul>\n<li>并且如果发现是字典，可以用<code>.</code>字典里面的key取出value值。也可以直接字典跟<code>[]</code>进行取值。</li>\n</ul>\n<hr />\n<h4 id=\"4214-模板中使用url_for\"><a class=\"markdownIt-Anchor\" href=\"#4214-模板中使用url_for\"></a> 4.2.1.4 模板中使用<code>url_for()</code></h4>\n<p>在模板中如果有使用url的需求，我们可以直接手写一个url，也可以使用<code>&#123;&#123; url_for('视图函数名') &#125;</code>动态翻转一个url。</p>\n<p><strong>示例：</strong></p>\n<ul>\n<li><strong>项目目录：</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates # 文件夹</span><br><span class=\"line\">        index.html</span><br><span class=\"line\">        info.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong><a href=\"http://server.py\">server.py</a></strong></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>, name=<span class=\"string\">&quot;mark&quot;</span>, age=<span class=\"number\">18</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/info/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">info</span>():</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;info.html&#x27;</span>)</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>info.html</strong></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>信息页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>这是信息页面<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>index.html</strong></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板传参<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/info/&quot;</span>&gt;</span>正常跳转<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;info&#x27;) &#125;&#125;&quot;</span>&gt;</span>urlfor跳转<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span>\t</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224523335-324667031.png\" alt=\"\" /></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224539789-1105569436.png\" alt=\"\" /></p>\n<p>正常跳转 和 urlfor跳转，皆可以实现跳转到info.html页面。</p>\n<p>正常跳转就不做演示了</p>\n<p><strong>注</strong>：</p>\n<ul>\n<li>url_for 在视图函数中如何使用，在模板中同样的用法。</li>\n<li>支持翻转查询字符串</li>\n<li>支持动态路由翻转</li>\n</ul>\n<hr />\n<h4 id=\"4215-jinjia2中控制语句\"><a class=\"markdownIt-Anchor\" href=\"#4215-jinjia2中控制语句\"></a> 4.2.1.5 jinjia2中控制语句</h4>\n<p>在jinja2中用<code>&#123;% %&#125;</code>特殊符号来编辑控制语句，一个语句以<code>&#123;% ... %&#125;`为起始 并且以`&#123;% end... %&#125;</code>来标记结束。</p>\n<h5 id=\"1-jinja2中逻辑语句if语句\"><a class=\"markdownIt-Anchor\" href=\"#1-jinja2中逻辑语句if语句\"></a> 1 jinja2中逻辑语句/if语句</h5>\n<p>可以使用<code>&gt; , &lt; , &lt;=, ==，!=,</code>进行判断，</p>\n<p>也可以使用 <code>and，or，not，（）</code>来进行逻辑合并</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% if age &gt; 18 %&#125;</span><br><span class=\"line\">    &lt;p&gt;成年人&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% elif age &#x3D;&#x3D; 18 %&#125;</span><br><span class=\"line\">    &lt;p&gt;刚刚成年&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% else %&#125;</span><br><span class=\"line\">    &lt;p&gt;未成年&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>\n<p>注意：``只是为了渲染明显</p>\n<p><strong>实例：</strong></p>\n<ul>\n<li><strong>项目目录</strong>：</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates # 文件夹</span><br><span class=\"line\">        index.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong><a href=\"http://server.py\">server.py</a></strong></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span></span><br><span class=\"line\">    context_dict = &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;age&#x27;</span>: <span class=\"number\">17</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;sex&#x27;</span>: <span class=\"string\">&#x27;man&#x27;</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict)</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>index.html</strong></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>jinja2分支<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;% if sex == &#x27;man&#x27; %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>男人<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% else %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>女人<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% endif %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;% if age &gt; 18 %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>成年人<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% elif age == 18 %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>刚刚成年<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% else %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>未成年<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% endif %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224646066-395309950.png\" alt=\"\" /></p>\n<h5 id=\"2-jinja2中循环语句for循环\"><a class=\"markdownIt-Anchor\" href=\"#2-jinja2中循环语句for循环\"></a> 2 jinja2中循环语句/for循环</h5>\n<p><code>for</code>循环可以便利任何一个可迭代对象，包括列表、字典等，支持反向遍历</p>\n<p><strong>列表循环：</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% for country in countrys%&#125;</span><br><span class=\"line\">    &lt;p&gt;&#123;&#123; country &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% else %&#125;</span><br><span class=\"line\">    &lt;p&gt;没有值&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>2.1 列表循环遍历项目实例：</strong></p>\n<ul>\n<li>项目目录：</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates # 文件夹</span><br><span class=\"line\">        index.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://sever.py\">sever.py</a></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)                                                </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span>                                             </span><br><span class=\"line\">    context_dict = &#123;                                           </span><br><span class=\"line\">        <span class=\"string\">&#x27;countrys&#x27;</span>:[<span class=\"string\">&quot;1-china&quot;</span>,<span class=\"string\">&quot;2-America&quot;</span>,<span class=\"string\">&quot;3-French&quot;</span>]          </span><br><span class=\"line\">    &#125;                                                          </span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict)        </span><br></pre></td></tr></table></figure>\n<ul>\n<li>index.html</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>for循环<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;% for country in countrys %&#125;  &#123;#    &#123;% for country in countrys|reverse %&#125; 可以实现反向遍历#&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; country &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% else %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>没有值<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224713780-683001332.png\" alt=\"\" /></p>\n<p><em>反向遍历实例</em></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server.py&#96;的 &#96;&#123;% for country in countrys %&#125;&#96; 改为 &#96;&#123;% for country in countrys|reverse %&#125;</span><br></pre></td></tr></table></figure>\n<p>可以实现反向遍历，运行效果如下图</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224733161-1381972809.png\" alt=\"\" /></p>\n<p><strong>2.2 字典循环遍历项目实例</strong>：</p>\n<ul>\n<li>项目目录</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">        index.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://sever.py\">sever.py</a></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)                                         </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span>                                      </span><br><span class=\"line\">    context_dict = &#123;                                    </span><br><span class=\"line\">        <span class=\"string\">&#x27;countrys&#x27;</span>:[<span class=\"string\">&quot;1-china&quot;</span>,<span class=\"string\">&quot;2-America&quot;</span>,<span class=\"string\">&quot;3-French&quot;</span>]   </span><br><span class=\"line\">    &#125;                                                   </span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict) </span><br><span class=\"line\">                                                        </span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo/&#x27;</span></span>)                                    </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo</span>():</span>                                             </span><br><span class=\"line\">    context_dict =&#123;                                     </span><br><span class=\"line\">        <span class=\"string\">&#x27;colleges&#x27;</span>:[                                    </span><br><span class=\"line\">            &#123;                                           </span><br><span class=\"line\">                <span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;清华大学&#x27;</span>,                       </span><br><span class=\"line\">                <span class=\"string\">&#x27;area&#x27;</span>: <span class=\"string\">&#x27;北京&#x27;</span>                           </span><br><span class=\"line\">            &#125;,                                          </span><br><span class=\"line\">            &#123;                                           </span><br><span class=\"line\">                <span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;复旦大学&#x27;</span>,                       </span><br><span class=\"line\">                <span class=\"string\">&#x27;area&#x27;</span>: <span class=\"string\">&#x27;上海&#x27;</span>                           </span><br><span class=\"line\">                <span class=\"string\">&#x27;&#x27;</span>                                      </span><br><span class=\"line\">            &#125;,                                          </span><br><span class=\"line\">            &#123;                                           </span><br><span class=\"line\">                <span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;吉林大学&#x27;</span>,                       </span><br><span class=\"line\">                <span class=\"string\">&#x27;area&#x27;</span>: <span class=\"string\">&#x27;吉林&#x27;</span>                           </span><br><span class=\"line\">            &#125;,                                          </span><br><span class=\"line\">            &#123;                                                           <span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;中山大学&#x27;</span>,                       </span><br><span class=\"line\">                <span class=\"string\">&#x27;area&#x27;</span>: <span class=\"string\">&#x27;广东&#x27;</span>                           </span><br><span class=\"line\">            &#125;                                           </span><br><span class=\"line\">        ]                                               </span><br><span class=\"line\">    &#125;                                                   </span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict) </span><br></pre></td></tr></table></figure>\n<ul>\n<li>index.html</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>for循环<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>1开始的序号<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>0开始的序号<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>大学名称<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>所属地区<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>总数<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        &#123;% for college in colleges %&#125;</span><br><span class=\"line\">            &#123;% if loop.first %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">tr</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background: blue&quot;</span>&gt;</span></span><br><span class=\"line\">            &#123;% elif loop.last %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">tr</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background: yellow &quot;</span>&gt;</span></span><br><span class=\"line\">            &#123;% else %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">            &#123;% endif %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; loop.index &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; loop.index0 &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; college.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; college.area &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; loop.length &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        &#123;% endfor %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224837066-1563439545.png\" alt=\"\" /></p>\n<p><strong>for循环常用变量表</strong></p>\n<table>\n<thead>\n<tr>\n<th>for循环常用变量</th>\n<th>功能描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>loop.index</td>\n<td>当前循环的索引（从1开始）</td>\n</tr>\n<tr>\n<td>loop.index0</td>\n<td>当前循环的索引（从0开始）</td>\n</tr>\n<tr>\n<td>loop.first</td>\n<td>是否是第一次循环，是返回True，否则返回Flase</td>\n</tr>\n<tr>\n<td>loop.last</td>\n<td>是否是最后一次循环，是返回True，否则返回Flase</td>\n</tr>\n<tr>\n<td>loop.length</td>\n<td>总共可以循环的次数 / 迭代器的长度</td>\n</tr>\n</tbody>\n</table>\n<p><strong>for循环中的else用法</strong></p>\n<p>for还可以else分支语法，如果for内部没有遍历出来内容，那么就会走else分支，反之如果for循环遍历出了内容，则不会运行else分支。</p>\n<p><em>注意：<code>jinja2</code>中的<code>for</code> 和 <code>else</code>逻辑不通于<code>python</code>在此不要类比python中的 <code>for</code> 和 <code>else</code> 。</em></p>\n<h2 id=\"-code29-\"><a class=\"markdownIt-Anchor\" href=\"#-code29-\"></a> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% for country in countrys|reverse %&#125;</span><br><span class=\"line\">        &lt;p&gt;&#123;&#123; country &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class=\"line\">    &#123;% else %&#125;</span><br><span class=\"line\">        &lt;p&gt;没有值&lt;&#x2F;p&gt;</span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br></pre></td></tr></table></figure></h2>\n<h4 id=\"4216-模板加载静态文件\"><a class=\"markdownIt-Anchor\" href=\"#4216-模板加载静态文件\"></a> 4.2.1.6 模板加载静态文件</h4>\n<p>在模板中加载静态文件的时候也要使用到<code>url_for()</code>函数，去寻找具体的静态文件资源。第一个参数是定位到<code>static</code>文件夹，<code>filename</code>参数定位到static文件夹内的具体资源。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&#123; url_for(<span class=\"string\">&#x27;static&#x27;</span>,filename=<span class=\"string\">&#x27;相对于static文件夹的路径&#x27;</span>) &#125;&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>实例：</strong></p>\n<ul>\n<li>项目目录：</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│  app.py</span><br><span class=\"line\">│</span><br><span class=\"line\">├─static  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│  ├─css  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│  │      demo.css</span><br><span class=\"line\">│  │</span><br><span class=\"line\">│  ├─images  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│  │      <span class=\"number\">1.</span>png</span><br><span class=\"line\">│  │</span><br><span class=\"line\">│  └─js  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│          demo.js</span><br><span class=\"line\">│</span><br><span class=\"line\">├─templates  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">     index.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://app.py\">app.py</a></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>)</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<ul>\n<li>index.html</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>静态文件加载<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;,filename=&#x27;css/demo.css&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;,filename=&#x27;js/demo.js&#x27;) &#125;&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;,filename=&#x27;images/1.png&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>demo.css</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>demo.js</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(<span class=\"string\">&#x27;hello world&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224930155-537702019.png\" alt=\"\" /></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224943631-369191930.png\" alt=\"\" /></p>\n<hr />\n<h4 id=\"4217-模板的继承\"><a class=\"markdownIt-Anchor\" href=\"#4217-模板的继承\"></a> 4.2.1.7 模板的继承</h4>\n<p>jinja2的模板继承可以把一些公共的代码定义到一个基模板中，比如把导航栏、页脚等通用内容放在基模板中，以后所有的子模板直接继承基模板，在子模板被渲染时会自动包含继承基模板的内容，通过模板的继承可以避免在多个模板中编写重复的代码。</p>\n<p><strong>具体实现：</strong></p>\n<p>在基模板中定义一些公共的代码，子模板会继承这些公共的代码，但是子模板需要根据自己的需求去实现不同的代码，这个时候就需要在基模板中提供一些接口，以便子模板实现自己的业务需求。</p>\n<p><strong>1 基本写法</strong></p>\n<p>在基/父模板中定义接口（block）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% block main %&#125; &#123;# main是自定义的变量名 #&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p>在子模板中继承父模板，并且重写接口（block）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#39;base.html&#39; %&#125; &#123;# extends 后面跟的参数是导入的基模板相对于templates的路径 #&#125;</span><br><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>2 子模板中调用父模板代码block中的代码</strong></p>\n<p>基模板中</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">&lt;p&gt;父模板中main中原有的内容&lt;&#x2F;p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p>子模板中：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">    &#123;&#123; super() &#125;&#125;   &#123;# 保留基模板中本块的代码 #&#125;</span><br><span class=\"line\">    &lt;p&gt;子模板中重写main的内容 &lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>3 在子模板中调用其他block中的代码：</strong></p>\n<p>子模板中：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">    &#123;&#123; self.demo() &#125;&#125; &#123;# self.其他block名字 #&#125;</span><br><span class=\"line\">    &lt;p&gt;子模板中重写main的内容 &lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>4 子模板中的想定义自己的代码只能放到block中，否则无效</strong></p>\n<p><strong>示例</strong></p>\n<p>注：这里面使用了bootstrap框架。</p>\n<p>bootstrap3的中文官网：<a href=\"https://v3.bootcss.com/\">https://v3.bootcss.com/</a></p>\n<p>1 首先下载 <code>用于生产环境的 Bootstrap</code></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225037822-1675072108.png\" alt=\"\" /></p>\n<p>2 解压出来里面的css文件</p>\n<ul>\n<li><strong>项目目录</strong></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│  app.py</span><br><span class=\"line\">│</span><br><span class=\"line\">├─static  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│  └─css</span><br><span class=\"line\">│          bootstrap-theme.css</span><br><span class=\"line\">│          bootstrap-theme.css.<span class=\"built_in\">map</span></span><br><span class=\"line\">│          bootstrap-theme.<span class=\"built_in\">min</span>.css</span><br><span class=\"line\">│          bootstrap-theme.<span class=\"built_in\">min</span>.css.<span class=\"built_in\">map</span></span><br><span class=\"line\">│          bootstrap.css</span><br><span class=\"line\">│          bootstrap.css.<span class=\"built_in\">map</span></span><br><span class=\"line\">│          bootstrap.<span class=\"built_in\">min</span>.css</span><br><span class=\"line\">│          bootstrap.<span class=\"built_in\">min</span>.css.<span class=\"built_in\">map</span></span><br><span class=\"line\">│</span><br><span class=\"line\">├─templates  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">       base.html</span><br><span class=\"line\">       detail.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p><strong>css文件夹</strong>： 是从我们上面下载好的<code>用于生产环境的 Bootstrap</code>中解压出来的</p>\n</li>\n<li>\n<p><strong>base.html</strong></p>\n<p><em>注意：里面的<code>form</code>标签</em>中的内容和<code>nav</code>标签中的内容均是bootstrap框架的代码截取，<code>div</code>标签是用于清除浮动</p>\n</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>父模板<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;,filename=&#x27;css/bootstrap.css&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;navbar-form navbar-left&quot;</span> <span class=\"attr\">role</span>=<span class=\"string\">&quot;search&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-control&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;Search&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-default&quot;</span>&gt;</span>Submit<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot; visibility:hidden;display:block;font-size:0;clear:both;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            height:50px&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;% block main %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>父模板中main中原有的内容<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;% endblock %&#125;</span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    &#123;% block demo %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>demo中原有的内容<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% endblock %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot; visibility:hidden;display:block;font-size:0;clear:both;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            height:0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot;Page navigation&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;pagination&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot;Previous&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"symbol\">&amp;laquo;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>5<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot;Next&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"symbol\">&amp;raquo;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>detail.html</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#39;base.html&#39; %&#125;</span><br><span class=\"line\">&#123;% block demo %&#125;</span><br><span class=\"line\">    &lt;p&gt;子模板中重写demo的内容&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endblock %&#125;</span><br><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">    &#123;&#123; super() &#125;&#125;   &#123;# 保留基模板中本block的代码 #&#125;</span><br><span class=\"line\">    &#123;&#123; self.demo() &#125;&#125; &#123;# 调用demo block的代码 #&#125;</span><br><span class=\"line\">    &lt;p&gt;子模板中重写main的内容 &lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p><strong><a href=\"http://app.py\">app.py</a></strong></p>\n<p><em>注意：<code>app.config.update(TEMPLATES_AUTO_RELOAD=True)</code>语句用于每次都重新加载模板文件</em></p>\n</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, render_template</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">app.config.update(TEMPLATES_AUTO_RELOAD=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;base.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;detail.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n<p>子模板运行效果</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225132760-1032846285.png\" alt=\"\" /></p>\n<hr />\n<h2 id=\"43-闪现\"><a class=\"markdownIt-Anchor\" href=\"#43-闪现\"></a> 4.3 闪现</h2>\n<h3 id=\"431-在模板中获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#431-在模板中获取闪现信息\"></a> 4.3.1 在模板中获取闪现信息</h3>\n<p>Flask 提供了一个非常简单的方法来使用闪现系统向用户反馈信息。闪现系统使得在一个请求结束的时候记录一个信息，<code>然后在且仅仅在下一个请求中访问这个数据</code>，强调flask闪现是基于<code>flask</code>内置的<code>session</code>的，利用浏览器的<code>session</code>缓存闪现信息。所以必须设置<code>secret_key</code>。</p>\n<h4 id=\"4311-简单的在模板中实现获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#4311-简单的在模板中实现获取闪现信息\"></a> 4.3.1.1 简单的在模板中实现获取闪现信息</h4>\n<p><strong>示例：</strong></p>\n<ul>\n<li><a href=\"http://server.py\">server.py</a></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, flash, redirect, render_template, \\</span><br><span class=\"line\">     request, url_for</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">app.secret_key = <span class=\"string\">&#x27;some_secret&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login&#x27;</span>, methods=[<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    error = <span class=\"literal\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> request.method == <span class=\"string\">&#x27;POST&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> request.form[<span class=\"string\">&#x27;username&#x27;</span>] != <span class=\"string\">&#x27;admin&#x27;</span> <span class=\"keyword\">or</span> \\</span><br><span class=\"line\">                request.form[<span class=\"string\">&#x27;password&#x27;</span>] != <span class=\"string\">&#x27;123&#x27;</span>:</span><br><span class=\"line\">            error = <span class=\"string\">&#x27;登录失败&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> redirect(url_for(<span class=\"string\">&#x27;index&#x27;</span>))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;login.html&#x27;</span>, error=error)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n<p><em><strong>注：这个 <code>flash()</code> 就可以实现在下一次请求时候，将括号内的信息做一个缓存。不要忘记设置secret_key</strong></em></p>\n<ul>\n<li>index.html 模板:</li>\n</ul>\n<figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">with</span></span> messages = get_flashed_messages() %&#125;</span><span class=\"xml\">  // 获取所有的闪现信息返回一个列表</span></span><br><span class=\"line\"><span class=\"xml\">  </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> messages %&#125;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">flashes</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">for</span></span> message <span class=\"keyword\">in</span> messages %&#125;</span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; message &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endfor</span></span> %&#125;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span></span><br><span class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endwith</span></span> %&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>主页<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>跳转到登录页面<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;</span></span></span><span class=\"template-variable\">&#123;&#123; url_for(&#x27;login&#x27;) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">&quot;</span>&gt;</span>登录?<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p><em><strong>注意：<code>&#123;% with messages = get_flashed_messages() %&#125;</code>  获取所有的闪现信息返回一个列表</strong></em></p>\n<ul>\n<li>login.html 模板</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>登录页面<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">&#123;% if error %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">error</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>Error:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; error &#125;&#125;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">post</span>&gt;</span></span><br><span class=\"line\">    用户名:</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">text</span> <span class=\"attr\">name</span>=<span class=\"string\">username</span>&gt;</span></span><br><span class=\"line\">    密码:</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">password</span> <span class=\"attr\">name</span>=<span class=\"string\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">submit</span> <span class=\"attr\">value</span>=<span class=\"string\">Login</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225302972-923905323.png\"><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225302972-923905323.png\" alt=\"img\" /></a></p>\n<p><strong>简单的在模板中实现获取闪现信息小结：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">设置闪现内容：flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>)</span><br><span class=\"line\">模板取出闪现内容：&#123;% <span class=\"keyword\">with</span> messages = get_flashed_messages() %&#125; </span><br></pre></td></tr></table></figure>\n<h4 id=\"4312-模板中的分类闪现\"><a class=\"markdownIt-Anchor\" href=\"#4312-模板中的分类闪现\"></a> 4.3.1.2 模板中的分类闪现</h4>\n<p>当闪现一个消息时，是可以提供一个分类的。未指定分类时默认的分类为 <code>'message'</code> 。 可以使用分类来提供给用户更好的反馈，可以给用户更精准的提示信息体验。</p>\n<p>要使用一个自定义的分类，只要使用 <code>flash()</code> 函数的第二个参数:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>,<span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">flash(<span class=\"string\">&#x27;您的账户名为admin&#x27;</span>,<span class=\"string\">&quot;username&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>在使用<code>get_flashed_messages()</code>时候需要传入<code>with_categories=true</code>便可以渲染出来类别</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% with messages &#x3D; get_flashed_messages(with_categories&#x3D;true) %&#125;</span><br><span class=\"line\">  &#123;% if messages %&#125;</span><br><span class=\"line\">    &lt;ul class&#x3D;flashes&gt;</span><br><span class=\"line\">    &#123;% for category, message in messages %&#125;</span><br><span class=\"line\">      &lt;li class&#x3D;&quot;&#123;&#123; category &#125;&#125;&quot;&gt;&#123;&#123; category &#125;&#125;：&#123;&#123; message &#125;&#125;&lt;&#x2F;li&gt;</span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br><span class=\"line\">    &lt;&#x2F;ul&gt;</span><br><span class=\"line\">  &#123;% endif %&#125;</span><br><span class=\"line\">&#123;% endwith %&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225414778-1619324382.png\" alt=\"\" /></p>\n<p><strong>模板中的分类闪现小结：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">分类设置闪现内容：flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>,<span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">\t\t    flash(<span class=\"string\">&#x27;您的账户名为admin&#x27;</span>,<span class=\"string\">&quot;username&quot;</span>)</span><br><span class=\"line\">模板取值：   &#123;% <span class=\"keyword\">with</span> messages = get_flashed_messages(with_categories=true) %&#125;</span><br><span class=\"line\">            &#123;% <span class=\"keyword\">if</span> messages %&#125;</span><br><span class=\"line\">            &lt;ul class=flashes&gt;</span><br><span class=\"line\">            &#123;% <span class=\"keyword\">for</span> category, message <span class=\"keyword\">in</span> messages %&#125;</span><br><span class=\"line\">            ...</span><br><span class=\"line\">    </span><br></pre></td></tr></table></figure>\n<h4 id=\"4313-模板中过滤闪现消息\"><a class=\"markdownIt-Anchor\" href=\"#4313-模板中过滤闪现消息\"></a> 4.3.1.3 模板中过滤闪现消息</h4>\n<p>同样要使用一个自定义的分类，只要使用 <code>flash()</code> 函数的第二个参数:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>,<span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">flash(<span class=\"string\">&#x27;您的账户名为admin&#x27;</span>,<span class=\"string\">&quot;username&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>在使用<code>get_flashed_messages()</code>时候需要传入<code>category_filter=[&quot;username&quot;]</code>便可根据类别取出闪现信息。中括号内可以传入的值就是类别，可以传入多个。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% with messages &#x3D; get_flashed_messages(category_filter&#x3D;[&quot;username&quot;]) %&#125;</span><br><span class=\"line\">&#123;% if messages %&#125;</span><br><span class=\"line\">  &lt;ul&gt;</span><br><span class=\"line\">    &#123;%- for message in messages %&#125;</span><br><span class=\"line\">    &lt;li&gt;&#123;&#123; message &#125;&#125;&lt;&#x2F;li&gt;</span><br><span class=\"line\">    &#123;% endfor -%&#125;</span><br><span class=\"line\">  &lt;&#x2F;ul&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br><span class=\"line\">&#123;% endwith %&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225508108-1219527274.png\" alt=\"\" /></p>\n<p><strong>小结：</strong></p>\n<h2 id=\"-code54-\"><a class=\"markdownIt-Anchor\" href=\"#-code54-\"></a> <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">分类设置闪现内容：flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>,<span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">\t\t    flash(<span class=\"string\">&#x27;您的账户名为admin&#x27;</span>,<span class=\"string\">&quot;username&quot;</span>)</span><br><span class=\"line\">模板取值：  % <span class=\"keyword\">with</span> messages = get_flashed_messages(category_filter=[<span class=\"string\">&quot;username&quot;</span>]) %&#125;</span><br><span class=\"line\">            &#123;% <span class=\"keyword\">if</span> messages %&#125;</span><br><span class=\"line\">              &lt;ul&gt;</span><br><span class=\"line\">                &#123;%- <span class=\"keyword\">for</span> message <span class=\"keyword\">in</span> messages %&#125;</span><br></pre></td></tr></table></figure></h2>\n<h3 id=\"432-在视图中获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#432-在视图中获取闪现信息\"></a> 4.3.2 在视图中获取闪现信息</h3>\n<h4 id=\"4321-简单的在是视图中获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#4321-简单的在是视图中获取闪现信息\"></a> 4.3.2.1 简单的在是视图中获取闪现信息</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-设置: flash(<span class=\"string\">&#x27;xxx&#x27;</span>)</span><br><span class=\"line\">-取值：get_flashed_message() <span class=\"comment\"># 注意这个不同于模板取值，这个是从flask中导入的</span></span><br><span class=\"line\">-注意：在视图中获取闪现信息不必非得是两次连续的请求，只要保证是第一次取相应的闪现信息，就可以取得到。</span><br></pre></td></tr></table></figure>\n<p><strong>示例：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, request, flash, get_flashed_messages</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">app.secret_key = os.urandom(<span class=\"number\">4</span>)</span><br><span class=\"line\">app.debug = <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> request.args.get(<span class=\"string\">&#x27;name&#x27;</span>) == <span class=\"string\">&#x27;rocky&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;ok&#x27;</span></span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;第一条闪现信息：用户名不是rocky填写的是&#123;&#125;&#x27;</span>.<span class=\"built_in\">format</span>(request.args.get(<span class=\"string\">&#x27;name&#x27;</span>)))</span><br><span class=\"line\">    <span class=\"comment\"># flash(&#x27;第二条闪现信息：用户名不是rocky填写的是&#123;&#125;&#x27;.format(request.args.get(&#x27;name&#x27;)))</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error,设置了闪现&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/get_flash/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_flash</span>():</span></span><br><span class=\"line\">    <span class=\"comment\">#get_flashed_messages()是一个列表列表可以取出闪现信息，该条闪现信息只要被取出就会删除掉。</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;闪现的信息是&#123;&#125;&#x27;</span>.<span class=\"built_in\">format</span>(get_flashed_messages())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;demo&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n<p>**（1）**会触发设置闪现内容</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225741600-1999590365.png\" alt=\"\" /></p>\n<p>**（2）**取出闪现内容</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225759151-1622451818.png\" alt=\"\" /></p>\n<p>**（3）**再次取出闪现内容，发现闪现内容取出一次后就为空了</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225817440-1326379837.png\" alt=\"\" /></p>\n<p><strong>小结：</strong></p>\n<ul>\n<li>get_flashed_messages()是一个列表，该列表可以取出闪现信息，该条闪现信息只要被取出就会删除掉。</li>\n</ul>\n<h4 id=\"4322-在视图中实现分类获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#4322-在视图中实现分类获取闪现信息\"></a> 4.3.2.2 在视图中实现分类获取闪现信息。</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-设置：flash(<span class=\"string\">&#x27;用户名错误&#x27;</span>, <span class=\"string\">&quot;username_error&quot;</span>)</span><br><span class=\"line\">      flash(<span class=\"string\">&#x27;用户密码错误&#x27;</span>, <span class=\"string\">&quot;password_error&quot;</span>) <span class=\"comment\"># 第二个参数为闪现信息的分类。</span></span><br><span class=\"line\"></span><br><span class=\"line\">-取所有闪现信息的类别和闪现内容：get_flashed_messages(with_categories=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">-针对分类过滤取值：get_flashed_messages(category_filter=[<span class=\"string\">&#x27;username_error&#x27;</span>]) </span><br><span class=\"line\">\t\t\t<span class=\"comment\"># 中括号内可以写多个分类。</span></span><br><span class=\"line\">    </span><br><span class=\"line\">-注意：如果flash()没有传入第二个参数进行分类，默认分类是 <span class=\"string\">&#x27;message&#x27;</span></span><br><span class=\"line\">  </span><br></pre></td></tr></table></figure>\n<p><strong>示例1</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> request.args.get(<span class=\"string\">&#x27;name&#x27;</span>) == <span class=\"string\">&#x27;rocky&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;ok&#x27;</span></span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;用户名错误&#x27;</span>, category=<span class=\"string\">&quot;username_error&quot;</span>)</span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;用户密码错误&#x27;</span>, <span class=\"string\">&quot;password_error&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error,设置了闪现&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/get_flash/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_flash</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;闪现的信息是&#123;&#125;&#x27;</span>.<span class=\"built_in\">format</span>(get_flashed_messages(with_categories=<span class=\"literal\">True</span>))</span><br></pre></td></tr></table></figure>\n<p>把所有的闪现类别和闪现信息返回。</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225902851-1504075500.png\" alt=\"\" /></p>\n<p><strong>示例2</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> request.args.get(<span class=\"string\">&#x27;name&#x27;</span>) == <span class=\"string\">&#x27;rocky&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;ok&#x27;</span></span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;用户名错误&#x27;</span>, category=<span class=\"string\">&quot;username_error&quot;</span>)</span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;用户密码错误&#x27;</span>, <span class=\"string\">&quot;password_error&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error,设置了闪现&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/get_flash/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_flash</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;闪现的信息是&#123;&#125;&#x27;</span>.<span class=\"built_in\">format</span>(get_flashed_messages(category_filter=[<span class=\"string\">&#x27;username_error&#x27;</span>]))</span><br></pre></td></tr></table></figure>\n<p>返回页面只显示了 <code>&quot;username_error&quot;</code>的分类内容。</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225944998-1472473367.png\" alt=\"\" /></p>\n","more":"<h2 id=\"41-重定向\"><a class=\"markdownIt-Anchor\" href=\"#41-重定向\"></a> 4.1 重定向</h2>\n<h3 id=\"411-两种重定向\"><a class=\"markdownIt-Anchor\" href=\"#411-两种重定向\"></a> 4.1.1 两种重定向</h3>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>http状态码</th>\n<th>应用场景</th>\n<th>优势</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>暂时性重定向</td>\n<td>302</td>\n<td>访问一些需要权限的页面，会自动重定向到权限认证的页面</td>\n<td>重定向在设计上会提升用户体验</td>\n</tr>\n<tr>\n<td>永久性重定向</td>\n<td>301</td>\n<td>废弃原有的网址被访问，会自动重定向到新的网址确保用户访问成功</td>\n<td>重定向在设计上会提升用户体验，有利于搜索引擎优化</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"412-使用重定向\"><a class=\"markdownIt-Anchor\" href=\"#412-使用重定向\"></a> 4.1.2 使用重定向</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask,redirect</span><br></pre></td></tr></table></figure>\n<h4 id=\"4121-暂时性重定向\"><a class=\"markdownIt-Anchor\" href=\"#4121-暂时性重定向\"></a> 4.1.2.1 暂时性重定向</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask,redirect</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/user_info/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">user_info</span>():</span></span><br><span class=\"line\">    name = request.args.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    pwd = request.args.get(<span class=\"string\">&#x27;pwd&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> name==<span class=\"string\">&#x27;mark&#x27;</span> <span class=\"keyword\">and</span> pwd == <span class=\"string\">&#x27;123&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#123;&#125;的信息&#x27;</span>.<span class=\"built_in\">format</span>(name)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> redirect(<span class=\"string\">&#x27;/login/&#x27;</span>)  <span class=\"comment\"># 可以换成 return redirect(url_for(&#x27;login&#x27;))</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;这是登录页面&#x27;</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p><em>没有通过权限验证的情况</em></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009223915946-663464213.png\" alt=\"\" /></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009223931005-1760450460.png\" alt=\"\" /></p>\n<p><em>通过权限验证的情况</em></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224004911-166391160.png\" alt=\"\" /></p>\n<h4 id=\"4122-永久性重定向\"><a class=\"markdownIt-Anchor\" href=\"#4122-永久性重定向\"></a> 4.1.2.2 永久性重定向</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask,redirect</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/user_info/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">user_info</span>():</span></span><br><span class=\"line\">    name = request.args.get(<span class=\"string\">&#x27;name&#x27;</span>)</span><br><span class=\"line\">    pwd = request.args.get(<span class=\"string\">&#x27;pwd&#x27;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> name==<span class=\"string\">&#x27;mark&#x27;</span> <span class=\"keyword\">and</span> pwd == <span class=\"string\">&#x27;123&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#123;&#125;的信息&#x27;</span>.<span class=\"built_in\">format</span>(name)</span><br><span class=\"line\">   <span class=\"keyword\">return</span> redirect(<span class=\"string\">&#x27;/login/&#x27;</span>, code=<span class=\"number\">301</span>)  <span class=\"comment\"># 会返回301状态码给浏览器 </span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;这是登录页面&#x27;</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p><strong>注</strong>：永久性重定向只给<code>redirect('/login/', code=301)</code>多加了个<code>code=301</code>参数</p>\n<hr />\n<h2 id=\"42-jinja2引擎模板\"><a class=\"markdownIt-Anchor\" href=\"#42-jinja2引擎模板\"></a> 4.2 jinja2引擎模板</h2>\n<h3 id=\"421-在flask如何使用模板引擎\"><a class=\"markdownIt-Anchor\" href=\"#421-在flask如何使用模板引擎\"></a> 4.2.1 在<code>Flask</code>如何使用模板引擎？</h3>\n<p><code>Flask</code>使用<code>jinja2</code>作为框架的默认模板引擎，<code>Jinja2</code>是基于<code>python</code>的模板引擎，功能比较类似于于<code>PHP</code>的<code>smarty</code>，<code>J2ee</code>的<code>Freemarker</code>和<code>velocity</code>。<code>Jinja2</code>除了设置变量，还允许我们在模板中添加if判断，执行for迭代，调用函数等，以各种方式控制模板的输出。并且<code>jinja2</code>不限制模板的格式为<code>html</code>，可以是任何格式的文本文件。</p>\n<h4 id=\"4211-模板引擎返回对比视图函数直接返回html代码\"><a class=\"markdownIt-Anchor\" href=\"#4211-模板引擎返回对比视图函数直接返回html代码\"></a> 4.2.1.1 模板引擎返回对比视图函数直接返回html代码</h4>\n<p><strong>项目目录</strong></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224123798-1986402937.png\" alt=\"\" /></p>\n<p><strong>项目代码</strong></p>\n<p>**（1）login01.html **</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>登录界面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>login01<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span>  <span class=\"comment\">&lt;!--login02.html文件的这一行的内容是：‘ &lt;h1&gt;login02&lt;/h1&gt; ’  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span>&gt;</span></span><br><span class=\"line\">    用户：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span>&gt;</span></span><br><span class=\"line\">    密码：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>(2)login02.html</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>登录界面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>login01<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span>  <span class=\"comment\">&lt;!--login02.html文件的这一行的内容是：‘ &lt;h1&gt;login02&lt;/h1&gt; ’  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">&quot;POST&quot;</span>&gt;</span></span><br><span class=\"line\">    用户：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;username&quot;</span>&gt;</span></span><br><span class=\"line\">    密码：<span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">value</span>=<span class=\"string\">&quot;提交&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>(3) <a href=\"http://server.py\">server.py</a></strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, render_template</span><br><span class=\"line\"><span class=\"keyword\">import</span> config</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">app.config.from_object(config)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&lt;h2&gt;手写html&lt;/h2&gt;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo02/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo02</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;&#x27;&#x27;&lt;!DOCTYPE html&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;html lang=&quot;en&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;head&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;title&gt;登录界面&lt;/title&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/head&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;!--&lt;form action=&quot;/login_request/&quot; method=&quot;POST&quot;&gt;--&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;form action=&quot;&quot; method=&quot;POST&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    用户：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    密码：&lt;input type=&quot;text&quot; name=&quot;password&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">    &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/form&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/body&gt;</span></span><br><span class=\"line\"><span class=\"string\">&lt;/html&gt;&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo03/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo03</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;login01.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo04/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo04</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;box/login02.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n<p><strong>server.py代码逻辑分析</strong>：</p>\n<ul>\n<li>demo函数 和 demo02函数证明直接返回html代码可渲染浏览器</li>\n<li>demo03 证明利用模板引擎 实现了业务逻辑和页面逻辑的分离，减轻了开发的复杂度</li>\n<li>demo04 证明了 <code>render_template('box/login02.html')</code>的路径是templates文件夹的相对路径</li>\n</ul>\n<hr />\n<h4 id=\"4212-修改默认模板引擎寻求路径\"><a class=\"markdownIt-Anchor\" href=\"#4212-修改默认模板引擎寻求路径\"></a> 4.2.1.2 修改默认模板引擎寻求路径</h4>\n<p>Flask类中的<code>template_folder</code>参数可以指定模板寻找路径</p>\n<p>基于上2.3.1的项目</p>\n<ol>\n<li>现在把templates中的文件复制到 <code>C:/Users/Administrator/Desktop/template_box</code>中，并且删除项目中的templates的文件。</li>\n<li>修改server.py中<code>app = Flask(__name__)</code>为<code>app = Flask(__name__,template_folder='C:/Users/Administrator/Desktop/template_box')</code></li>\n</ol>\n<p><strong>分析:</strong></p>\n<p>渲染一切正常 说明Flask类中的<code>template_folder</code>参数可以指定模板寻找路径。</p>\n<hr />\n<h4 id=\"4213-模板引擎传参\"><a class=\"markdownIt-Anchor\" href=\"#4213-模板引擎传参\"></a> 4.2.1.3 模板引擎传参</h4>\n<p>我们之前提到过，模板引擎还可以读取并执行模板中的特殊语法标记，并根据传入的数据将变量替换为实际值，这个步骤我们就称之为模板引擎传参。</p>\n<p>我们传参的时候要应用<code>render_template()</code>利用render_template的第二个参数进行传参，该函数在定义时候，第二个参数是可变长形参，所以在传值的时候我们可以传入多个关键字实参。</p>\n<p>在模板中接收的时候使用<code>&#123;&#123;&#125;&#125;`包裹参数进行接收。\n\n![](https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224222394-1528143259.jpg)\n\n###### 示例1（第一种传参方式）：\n\n* **目录结构**\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">        index.html</span><br></pre></td></tr></table></figure>\n* **server.py**\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,name=<span class=\"string\">&quot;mark&quot;</span>,age=<span class=\"number\">18</span>)</span><br></pre></td></tr></table></figure>\n* **index.html**\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板传参<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;name&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;age&#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n![](https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224255518-247003677.png)\n\n\n\n###### 示例2（第二种传参方式）：\n\n* **目录结构**：同上\n\n* **server.py**\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo1/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo1</span>():</span></span><br><span class=\"line\">    context_dict = &#123;<span class=\"string\">&quot;name&quot;</span>:<span class=\"string\">&quot;mark&quot;</span>,</span><br><span class=\"line\">               <span class=\"string\">&quot;age&quot;</span>:<span class=\"string\">&quot;mark&quot;</span>,</span><br><span class=\"line\">               <span class=\"string\">&quot;sex&quot;</span>:<span class=\"string\">&quot;girl&quot;</span>&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,context_dict = context_dict)</span><br></pre></td></tr></table></figure>\n* **index.html**\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板传参<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;context_dict.name&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;context_dict.age&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;context_dict.sex&#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n![](https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224349511-583920666.png)\n\n\n\n###### 示例3（第三种传参方式）：\n\n* **目录结构**：同上\n\n* **server.py**\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo2</span>():</span></span><br><span class=\"line\">    context_dict = &#123;<span class=\"string\">&quot;name&quot;</span>: <span class=\"string\">&quot;mark&quot;</span>,</span><br><span class=\"line\">               <span class=\"string\">&quot;age&quot;</span>: <span class=\"string\">&quot;mark&quot;</span>,</span><br><span class=\"line\">               <span class=\"string\">&quot;sex&quot;</span>: <span class=\"string\">&quot;girl&quot;</span>,</span><br><span class=\"line\">                <span class=\"string\">&quot;other_info&quot;</span>:&#123;<span class=\"string\">&quot;tel&quot;</span>:<span class=\"number\">1365</span>,</span><br><span class=\"line\">                               <span class=\"string\">&quot;qq&quot;</span>:<span class=\"number\">565656</span>&#125;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict)</span><br></pre></td></tr></table></figure>\n* **index.html**\n\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板传参<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;&#123;name&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;age&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;sex&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;other_info.tel&#125;&#125;</span><br><span class=\"line\">    &#123;&#123;other_info[&quot;qq&quot;]&#125;&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n![](https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224455972-1435542843.png)\n\n**注**：\n\n在视图函数中\n\n- render_template传参的时候以关键字实参进行传参。可以传多个，可以用**讲字典打散成关键字实参。\n\n在模板中\n\n- jinja2模板引擎支持接收变量在用 `&#123;&#123;&#125;&#125;</code>包裹参数进行接收</p>\n<ul>\n<li>并且如果发现是字典，可以用<code>.</code>字典里面的key取出value值。也可以直接字典跟<code>[]</code>进行取值。</li>\n</ul>\n<hr />\n<h4 id=\"4214-模板中使用url_for\"><a class=\"markdownIt-Anchor\" href=\"#4214-模板中使用url_for\"></a> 4.2.1.4 模板中使用<code>url_for()</code></h4>\n<p>在模板中如果有使用url的需求，我们可以直接手写一个url，也可以使用<code>&#123;&#123; url_for('视图函数名') &#125;</code>动态翻转一个url。</p>\n<p><strong>示例：</strong></p>\n<ul>\n<li><strong>项目目录：</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates # 文件夹</span><br><span class=\"line\">        index.html</span><br><span class=\"line\">        info.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong><a href=\"http://server.py\">server.py</a></strong></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>, name=<span class=\"string\">&quot;mark&quot;</span>, age=<span class=\"number\">18</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/info/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">info</span>():</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;info.html&#x27;</span>)</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>info.html</strong></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>信息页面<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>这是信息页面<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>index.html</strong></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>模板传参<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;/info/&quot;</span>&gt;</span>正常跳转<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;info&#x27;) &#125;&#125;&quot;</span>&gt;</span>urlfor跳转<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span>\t</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224523335-324667031.png\" alt=\"\" /></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224539789-1105569436.png\" alt=\"\" /></p>\n<p>正常跳转 和 urlfor跳转，皆可以实现跳转到info.html页面。</p>\n<p>正常跳转就不做演示了</p>\n<p><strong>注</strong>：</p>\n<ul>\n<li>url_for 在视图函数中如何使用，在模板中同样的用法。</li>\n<li>支持翻转查询字符串</li>\n<li>支持动态路由翻转</li>\n</ul>\n<hr />\n<h4 id=\"4215-jinjia2中控制语句\"><a class=\"markdownIt-Anchor\" href=\"#4215-jinjia2中控制语句\"></a> 4.2.1.5 jinjia2中控制语句</h4>\n<p>在jinja2中用<code>&#123;% %&#125;</code>特殊符号来编辑控制语句，一个语句以<code>&#123;% ... %&#125;`为起始 并且以`&#123;% end... %&#125;</code>来标记结束。</p>\n<h5 id=\"1-jinja2中逻辑语句if语句\"><a class=\"markdownIt-Anchor\" href=\"#1-jinja2中逻辑语句if语句\"></a> 1 jinja2中逻辑语句/if语句</h5>\n<p>可以使用<code>&gt; , &lt; , &lt;=, ==，!=,</code>进行判断，</p>\n<p>也可以使用 <code>and，or，not，（）</code>来进行逻辑合并</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% if age &gt; 18 %&#125;</span><br><span class=\"line\">    &lt;p&gt;成年人&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% elif age &#x3D;&#x3D; 18 %&#125;</span><br><span class=\"line\">    &lt;p&gt;刚刚成年&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% else %&#125;</span><br><span class=\"line\">    &lt;p&gt;未成年&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>\n<p>注意：``只是为了渲染明显</p>\n<p><strong>实例：</strong></p>\n<ul>\n<li><strong>项目目录</strong>：</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates # 文件夹</span><br><span class=\"line\">        index.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong><a href=\"http://server.py\">server.py</a></strong></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span></span><br><span class=\"line\">    context_dict = &#123;</span><br><span class=\"line\">        <span class=\"string\">&#x27;age&#x27;</span>: <span class=\"number\">17</span>,</span><br><span class=\"line\">        <span class=\"string\">&#x27;sex&#x27;</span>: <span class=\"string\">&#x27;man&#x27;</span>,</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict)</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>index.html</strong></li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>jinja2分支<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;% if sex == &#x27;man&#x27; %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>男人<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% else %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>女人<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% endif %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;% if age &gt; 18 %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>成年人<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% elif age == 18 %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>刚刚成年<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% else %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>未成年<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% endif %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224646066-395309950.png\" alt=\"\" /></p>\n<h5 id=\"2-jinja2中循环语句for循环\"><a class=\"markdownIt-Anchor\" href=\"#2-jinja2中循环语句for循环\"></a> 2 jinja2中循环语句/for循环</h5>\n<p><code>for</code>循环可以便利任何一个可迭代对象，包括列表、字典等，支持反向遍历</p>\n<p><strong>列表循环：</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% for country in countrys%&#125;</span><br><span class=\"line\">    &lt;p&gt;&#123;&#123; country &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% else %&#125;</span><br><span class=\"line\">    &lt;p&gt;没有值&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>2.1 列表循环遍历项目实例：</strong></p>\n<ul>\n<li>项目目录：</li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates # 文件夹</span><br><span class=\"line\">        index.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://sever.py\">sever.py</a></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)                                                </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span>                                             </span><br><span class=\"line\">    context_dict = &#123;                                           </span><br><span class=\"line\">        <span class=\"string\">&#x27;countrys&#x27;</span>:[<span class=\"string\">&quot;1-china&quot;</span>,<span class=\"string\">&quot;2-America&quot;</span>,<span class=\"string\">&quot;3-French&quot;</span>]          </span><br><span class=\"line\">    &#125;                                                          </span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict)        </span><br></pre></td></tr></table></figure>\n<ul>\n<li>index.html</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>for循环<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    &#123;% for country in countrys %&#125;  &#123;#    &#123;% for country in countrys|reverse %&#125; 可以实现反向遍历#&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>&#123;&#123; country &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% else %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>没有值<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224713780-683001332.png\" alt=\"\" /></p>\n<p><em>反向遍历实例</em></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">server.py&#96;的 &#96;&#123;% for country in countrys %&#125;&#96; 改为 &#96;&#123;% for country in countrys|reverse %&#125;</span><br></pre></td></tr></table></figure>\n<p>可以实现反向遍历，运行效果如下图</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224733161-1381972809.png\" alt=\"\" /></p>\n<p><strong>2.2 字典循环遍历项目实例</strong>：</p>\n<ul>\n<li>项目目录</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│ server.py</span><br><span class=\"line\">│</span><br><span class=\"line\">└─templates <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">        index.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://sever.py\">sever.py</a></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)                                         </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span>                                      </span><br><span class=\"line\">    context_dict = &#123;                                    </span><br><span class=\"line\">        <span class=\"string\">&#x27;countrys&#x27;</span>:[<span class=\"string\">&quot;1-china&quot;</span>,<span class=\"string\">&quot;2-America&quot;</span>,<span class=\"string\">&quot;3-French&quot;</span>]   </span><br><span class=\"line\">    &#125;                                                   </span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict) </span><br><span class=\"line\">                                                        </span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo/&#x27;</span></span>)                                    </span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo</span>():</span>                                             </span><br><span class=\"line\">    context_dict =&#123;                                     </span><br><span class=\"line\">        <span class=\"string\">&#x27;colleges&#x27;</span>:[                                    </span><br><span class=\"line\">            &#123;                                           </span><br><span class=\"line\">                <span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;清华大学&#x27;</span>,                       </span><br><span class=\"line\">                <span class=\"string\">&#x27;area&#x27;</span>: <span class=\"string\">&#x27;北京&#x27;</span>                           </span><br><span class=\"line\">            &#125;,                                          </span><br><span class=\"line\">            &#123;                                           </span><br><span class=\"line\">                <span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;复旦大学&#x27;</span>,                       </span><br><span class=\"line\">                <span class=\"string\">&#x27;area&#x27;</span>: <span class=\"string\">&#x27;上海&#x27;</span>                           </span><br><span class=\"line\">                <span class=\"string\">&#x27;&#x27;</span>                                      </span><br><span class=\"line\">            &#125;,                                          </span><br><span class=\"line\">            &#123;                                           </span><br><span class=\"line\">                <span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;吉林大学&#x27;</span>,                       </span><br><span class=\"line\">                <span class=\"string\">&#x27;area&#x27;</span>: <span class=\"string\">&#x27;吉林&#x27;</span>                           </span><br><span class=\"line\">            &#125;,                                          </span><br><span class=\"line\">            &#123;                                                           <span class=\"string\">&#x27;name&#x27;</span>: <span class=\"string\">&#x27;中山大学&#x27;</span>,                       </span><br><span class=\"line\">                <span class=\"string\">&#x27;area&#x27;</span>: <span class=\"string\">&#x27;广东&#x27;</span>                           </span><br><span class=\"line\">            &#125;                                           </span><br><span class=\"line\">        ]                                               </span><br><span class=\"line\">    &#125;                                                   </span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>,**context_dict) </span><br></pre></td></tr></table></figure>\n<ul>\n<li>index.html</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>for循环<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>1开始的序号<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>0开始的序号<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>大学名称<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>所属地区<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">th</span>&gt;</span>总数<span class=\"tag\">&lt;/<span class=\"name\">th</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        &#123;% for college in colleges %&#125;</span><br><span class=\"line\">            &#123;% if loop.first %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">tr</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background: blue&quot;</span>&gt;</span></span><br><span class=\"line\">            &#123;% elif loop.last %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">tr</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot;background: yellow &quot;</span>&gt;</span></span><br><span class=\"line\">            &#123;% else %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">            &#123;% endif %&#125;</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; loop.index &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; loop.index0 &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; college.name &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; college.area &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">td</span>&gt;</span>&#123;&#123; loop.length &#125;&#125;<span class=\"tag\">&lt;/<span class=\"name\">td</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">tr</span>&gt;</span></span><br><span class=\"line\">        &#123;% endfor %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224837066-1563439545.png\" alt=\"\" /></p>\n<p><strong>for循环常用变量表</strong></p>\n<table>\n<thead>\n<tr>\n<th>for循环常用变量</th>\n<th>功能描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>loop.index</td>\n<td>当前循环的索引（从1开始）</td>\n</tr>\n<tr>\n<td>loop.index0</td>\n<td>当前循环的索引（从0开始）</td>\n</tr>\n<tr>\n<td>loop.first</td>\n<td>是否是第一次循环，是返回True，否则返回Flase</td>\n</tr>\n<tr>\n<td>loop.last</td>\n<td>是否是最后一次循环，是返回True，否则返回Flase</td>\n</tr>\n<tr>\n<td>loop.length</td>\n<td>总共可以循环的次数 / 迭代器的长度</td>\n</tr>\n</tbody>\n</table>\n<p><strong>for循环中的else用法</strong></p>\n<p>for还可以else分支语法，如果for内部没有遍历出来内容，那么就会走else分支，反之如果for循环遍历出了内容，则不会运行else分支。</p>\n<p><em>注意：<code>jinja2</code>中的<code>for</code> 和 <code>else</code>逻辑不通于<code>python</code>在此不要类比python中的 <code>for</code> 和 <code>else</code> 。</em></p>\n<h2 id=\"-code29-\"><a class=\"markdownIt-Anchor\" href=\"#-code29-\"></a> <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% for country in countrys|reverse %&#125;</span><br><span class=\"line\">        &lt;p&gt;&#123;&#123; country &#125;&#125;&lt;&#x2F;p&gt;</span><br><span class=\"line\">    &#123;% else %&#125;</span><br><span class=\"line\">        &lt;p&gt;没有值&lt;&#x2F;p&gt;</span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br></pre></td></tr></table></figure></h2>\n<h4 id=\"4216-模板加载静态文件\"><a class=\"markdownIt-Anchor\" href=\"#4216-模板加载静态文件\"></a> 4.2.1.6 模板加载静态文件</h4>\n<p>在模板中加载静态文件的时候也要使用到<code>url_for()</code>函数，去寻找具体的静态文件资源。第一个参数是定位到<code>static</code>文件夹，<code>filename</code>参数定位到static文件夹内的具体资源。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;&#123; url_for(<span class=\"string\">&#x27;static&#x27;</span>,filename=<span class=\"string\">&#x27;相对于static文件夹的路径&#x27;</span>) &#125;&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>实例：</strong></p>\n<ul>\n<li>项目目录：</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│  app.py</span><br><span class=\"line\">│</span><br><span class=\"line\">├─static  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│  ├─css  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│  │      demo.css</span><br><span class=\"line\">│  │</span><br><span class=\"line\">│  ├─images  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│  │      <span class=\"number\">1.</span>png</span><br><span class=\"line\">│  │</span><br><span class=\"line\">│  └─js  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│          demo.js</span><br><span class=\"line\">│</span><br><span class=\"line\">├─templates  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">     index.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li><a href=\"http://app.py\">app.py</a></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>)</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<ul>\n<li>index.html</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>静态文件加载<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;,filename=&#x27;css/demo.css&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;,filename=&#x27;js/demo.js&#x27;) &#125;&#125;&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;,filename=&#x27;images/1.png&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>demo.css</li>\n</ul>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span>&#123;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: red;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>demo.js</li>\n</ul>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">alert(<span class=\"string\">&#x27;hello world&#x27;</span>)</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224930155-537702019.png\" alt=\"\" /></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009224943631-369191930.png\" alt=\"\" /></p>\n<hr />\n<h4 id=\"4217-模板的继承\"><a class=\"markdownIt-Anchor\" href=\"#4217-模板的继承\"></a> 4.2.1.7 模板的继承</h4>\n<p>jinja2的模板继承可以把一些公共的代码定义到一个基模板中，比如把导航栏、页脚等通用内容放在基模板中，以后所有的子模板直接继承基模板，在子模板被渲染时会自动包含继承基模板的内容，通过模板的继承可以避免在多个模板中编写重复的代码。</p>\n<p><strong>具体实现：</strong></p>\n<p>在基模板中定义一些公共的代码，子模板会继承这些公共的代码，但是子模板需要根据自己的需求去实现不同的代码，这个时候就需要在基模板中提供一些接口，以便子模板实现自己的业务需求。</p>\n<p><strong>1 基本写法</strong></p>\n<p>在基/父模板中定义接口（block）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% block main %&#125; &#123;# main是自定义的变量名 #&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p>在子模板中继承父模板，并且重写接口（block）</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#39;base.html&#39; %&#125; &#123;# extends 后面跟的参数是导入的基模板相对于templates的路径 #&#125;</span><br><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>2 子模板中调用父模板代码block中的代码</strong></p>\n<p>基模板中</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">&lt;p&gt;父模板中main中原有的内容&lt;&#x2F;p&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p>子模板中：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">    &#123;&#123; super() &#125;&#125;   &#123;# 保留基模板中本块的代码 #&#125;</span><br><span class=\"line\">    &lt;p&gt;子模板中重写main的内容 &lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>3 在子模板中调用其他block中的代码：</strong></p>\n<p>子模板中：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">    &#123;&#123; self.demo() &#125;&#125; &#123;# self.其他block名字 #&#125;</span><br><span class=\"line\">    &lt;p&gt;子模板中重写main的内容 &lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<p><strong>4 子模板中的想定义自己的代码只能放到block中，否则无效</strong></p>\n<p><strong>示例</strong></p>\n<p>注：这里面使用了bootstrap框架。</p>\n<p>bootstrap3的中文官网：<a href=\"https://v3.bootcss.com/\">https://v3.bootcss.com/</a></p>\n<p>1 首先下载 <code>用于生产环境的 Bootstrap</code></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225037822-1675072108.png\" alt=\"\" /></p>\n<p>2 解压出来里面的css文件</p>\n<ul>\n<li><strong>项目目录</strong></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">│  app.py</span><br><span class=\"line\">│</span><br><span class=\"line\">├─static  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">│  └─css</span><br><span class=\"line\">│          bootstrap-theme.css</span><br><span class=\"line\">│          bootstrap-theme.css.<span class=\"built_in\">map</span></span><br><span class=\"line\">│          bootstrap-theme.<span class=\"built_in\">min</span>.css</span><br><span class=\"line\">│          bootstrap-theme.<span class=\"built_in\">min</span>.css.<span class=\"built_in\">map</span></span><br><span class=\"line\">│          bootstrap.css</span><br><span class=\"line\">│          bootstrap.css.<span class=\"built_in\">map</span></span><br><span class=\"line\">│          bootstrap.<span class=\"built_in\">min</span>.css</span><br><span class=\"line\">│          bootstrap.<span class=\"built_in\">min</span>.css.<span class=\"built_in\">map</span></span><br><span class=\"line\">│</span><br><span class=\"line\">├─templates  <span class=\"comment\"># 文件夹</span></span><br><span class=\"line\">       base.html</span><br><span class=\"line\">       detail.html</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p><strong>css文件夹</strong>： 是从我们上面下载好的<code>用于生产环境的 Bootstrap</code>中解压出来的</p>\n</li>\n<li>\n<p><strong>base.html</strong></p>\n<p><em>注意：里面的<code>form</code>标签</em>中的内容和<code>nav</code>标签中的内容均是bootstrap框架的代码截取，<code>div</code>标签是用于清除浮动</p>\n</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">html</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">&quot;en&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>父模板<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;&#123;&#123; url_for(&#x27;static&#x27;,filename=&#x27;css/bootstrap.css&#x27;) &#125;&#125;&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;navbar-form navbar-left&quot;</span> <span class=\"attr\">role</span>=<span class=\"string\">&quot;search&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-group&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;text&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;form-control&quot;</span> <span class=\"attr\">placeholder</span>=<span class=\"string\">&quot;Search&quot;</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;submit&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;btn btn-default&quot;</span>&gt;</span>Submit<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot; visibility:hidden;display:block;font-size:0;clear:both;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            height:50px&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;% block main %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>父模板中main中原有的内容<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;% endblock %&#125;</span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">   <span class=\"tag\">&lt;<span class=\"name\">br</span>&gt;</span></span><br><span class=\"line\">    &#123;% block demo %&#125;</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>demo中原有的内容<span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\">    &#123;% endblock %&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">&quot; visibility:hidden;display:block;font-size:0;clear:both;</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"string\">            height:0&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">nav</span> <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot;Page navigation&quot;</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;pagination&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot;Previous&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"symbol\">&amp;laquo;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>2<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>3<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span>&gt;</span>5<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;#&quot;</span> <span class=\"attr\">aria-label</span>=<span class=\"string\">&quot;Next&quot;</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">aria-hidden</span>=<span class=\"string\">&quot;true&quot;</span>&gt;</span><span class=\"symbol\">&amp;raquo;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\">      <span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">nav</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><strong>detail.html</strong></li>\n</ul>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% extends &#39;base.html&#39; %&#125;</span><br><span class=\"line\">&#123;% block demo %&#125;</span><br><span class=\"line\">    &lt;p&gt;子模板中重写demo的内容&lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endblock %&#125;</span><br><span class=\"line\">&#123;% block main %&#125;</span><br><span class=\"line\">    &#123;&#123; super() &#125;&#125;   &#123;# 保留基模板中本block的代码 #&#125;</span><br><span class=\"line\">    &#123;&#123; self.demo() &#125;&#125; &#123;# 调用demo block的代码 #&#125;</span><br><span class=\"line\">    &lt;p&gt;子模板中重写main的内容 &lt;&#x2F;p&gt;</span><br><span class=\"line\">&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p><strong><a href=\"http://app.py\">app.py</a></strong></p>\n<p><em>注意：<code>app.config.update(TEMPLATES_AUTO_RELOAD=True)</code>语句用于每次都重新加载模板文件</em></p>\n</li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, render_template</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">app.config.update(TEMPLATES_AUTO_RELOAD=<span class=\"literal\">True</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">hello_world</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;base.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;detail.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n<p>子模板运行效果</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225132760-1032846285.png\" alt=\"\" /></p>\n<hr />\n<h2 id=\"43-闪现\"><a class=\"markdownIt-Anchor\" href=\"#43-闪现\"></a> 4.3 闪现</h2>\n<h3 id=\"431-在模板中获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#431-在模板中获取闪现信息\"></a> 4.3.1 在模板中获取闪现信息</h3>\n<p>Flask 提供了一个非常简单的方法来使用闪现系统向用户反馈信息。闪现系统使得在一个请求结束的时候记录一个信息，<code>然后在且仅仅在下一个请求中访问这个数据</code>，强调flask闪现是基于<code>flask</code>内置的<code>session</code>的，利用浏览器的<code>session</code>缓存闪现信息。所以必须设置<code>secret_key</code>。</p>\n<h4 id=\"4311-简单的在模板中实现获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#4311-简单的在模板中实现获取闪现信息\"></a> 4.3.1.1 简单的在模板中实现获取闪现信息</h4>\n<p><strong>示例：</strong></p>\n<ul>\n<li><a href=\"http://server.py\">server.py</a></li>\n</ul>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, flash, redirect, render_template, \\</span><br><span class=\"line\">     request, url_for</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">app.secret_key = <span class=\"string\">&#x27;some_secret&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">index</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;index.html&#x27;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login&#x27;</span>, methods=[<span class=\"string\">&#x27;GET&#x27;</span>, <span class=\"string\">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    error = <span class=\"literal\">None</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> request.method == <span class=\"string\">&#x27;POST&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> request.form[<span class=\"string\">&#x27;username&#x27;</span>] != <span class=\"string\">&#x27;admin&#x27;</span> <span class=\"keyword\">or</span> \\</span><br><span class=\"line\">                request.form[<span class=\"string\">&#x27;password&#x27;</span>] != <span class=\"string\">&#x27;123&#x27;</span>:</span><br><span class=\"line\">            error = <span class=\"string\">&#x27;登录失败&#x27;</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>)</span><br><span class=\"line\">            <span class=\"keyword\">return</span> redirect(url_for(<span class=\"string\">&#x27;index&#x27;</span>))</span><br><span class=\"line\">    <span class=\"keyword\">return</span> render_template(<span class=\"string\">&#x27;login.html&#x27;</span>, error=error)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n<p><em><strong>注：这个 <code>flash()</code> 就可以实现在下一次请求时候，将括号内的信息做一个缓存。不要忘记设置secret_key</strong></em></p>\n<ul>\n<li>index.html 模板:</li>\n</ul>\n<figure class=\"highlight django\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">with</span></span> messages = get_flashed_messages() %&#125;</span><span class=\"xml\">  // 获取所有的闪现信息返回一个列表</span></span><br><span class=\"line\"><span class=\"xml\">  </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">if</span></span> messages %&#125;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">ul</span> <span class=\"attr\">class</span>=<span class=\"string\">flashes</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">for</span></span> message <span class=\"keyword\">in</span> messages %&#125;</span></span><br><span class=\"line\"><span class=\"xml\">      <span class=\"tag\">&lt;<span class=\"name\">li</span>&gt;</span></span><span class=\"template-variable\">&#123;&#123; message &#125;&#125;</span><span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">li</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">    </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endfor</span></span> %&#125;</span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;/<span class=\"name\">ul</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  </span><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endif</span></span> %&#125;</span></span><br><span class=\"line\"><span class=\"template-tag\">&#123;% <span class=\"name\"><span class=\"name\">endwith</span></span> %&#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>主页<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"xml\">  <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span>跳转到登录页面<span class=\"tag\">&lt;<span class=\"name\">a</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;</span></span></span><span class=\"template-variable\">&#123;&#123; url_for(&#x27;login&#x27;) &#125;&#125;</span><span class=\"xml\"><span class=\"tag\"><span class=\"string\">&quot;</span>&gt;</span>登录?<span class=\"tag\">&lt;/<span class=\"name\">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n<p><em><strong>注意：<code>&#123;% with messages = get_flashed_messages() %&#125;</code>  获取所有的闪现信息返回一个列表</strong></em></p>\n<ul>\n<li>login.html 模板</li>\n</ul>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">h1</span>&gt;</span>登录页面<span class=\"tag\">&lt;/<span class=\"name\">h1</span>&gt;</span></span><br><span class=\"line\">&#123;% if error %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">p</span> <span class=\"attr\">class</span>=<span class=\"string\">error</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">strong</span>&gt;</span>Error:<span class=\"tag\">&lt;/<span class=\"name\">strong</span>&gt;</span> &#123;&#123; error &#125;&#125;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">form</span> <span class=\"attr\">action</span>=<span class=\"string\">&quot;&quot;</span> <span class=\"attr\">method</span>=<span class=\"string\">post</span>&gt;</span></span><br><span class=\"line\">    用户名:</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">text</span> <span class=\"attr\">name</span>=<span class=\"string\">username</span>&gt;</span></span><br><span class=\"line\">    密码:</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">password</span> <span class=\"attr\">name</span>=<span class=\"string\">password</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">p</span>&gt;</span><span class=\"tag\">&lt;<span class=\"name\">input</span> <span class=\"attr\">type</span>=<span class=\"string\">submit</span> <span class=\"attr\">value</span>=<span class=\"string\">Login</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">p</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">form</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><a href=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225302972-923905323.png\"><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225302972-923905323.png\" alt=\"img\" /></a></p>\n<p><strong>简单的在模板中实现获取闪现信息小结：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">设置闪现内容：flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>)</span><br><span class=\"line\">模板取出闪现内容：&#123;% <span class=\"keyword\">with</span> messages = get_flashed_messages() %&#125; </span><br></pre></td></tr></table></figure>\n<h4 id=\"4312-模板中的分类闪现\"><a class=\"markdownIt-Anchor\" href=\"#4312-模板中的分类闪现\"></a> 4.3.1.2 模板中的分类闪现</h4>\n<p>当闪现一个消息时，是可以提供一个分类的。未指定分类时默认的分类为 <code>'message'</code> 。 可以使用分类来提供给用户更好的反馈，可以给用户更精准的提示信息体验。</p>\n<p>要使用一个自定义的分类，只要使用 <code>flash()</code> 函数的第二个参数:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>,<span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">flash(<span class=\"string\">&#x27;您的账户名为admin&#x27;</span>,<span class=\"string\">&quot;username&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>在使用<code>get_flashed_messages()</code>时候需要传入<code>with_categories=true</code>便可以渲染出来类别</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% with messages &#x3D; get_flashed_messages(with_categories&#x3D;true) %&#125;</span><br><span class=\"line\">  &#123;% if messages %&#125;</span><br><span class=\"line\">    &lt;ul class&#x3D;flashes&gt;</span><br><span class=\"line\">    &#123;% for category, message in messages %&#125;</span><br><span class=\"line\">      &lt;li class&#x3D;&quot;&#123;&#123; category &#125;&#125;&quot;&gt;&#123;&#123; category &#125;&#125;：&#123;&#123; message &#125;&#125;&lt;&#x2F;li&gt;</span><br><span class=\"line\">    &#123;% endfor %&#125;</span><br><span class=\"line\">    &lt;&#x2F;ul&gt;</span><br><span class=\"line\">  &#123;% endif %&#125;</span><br><span class=\"line\">&#123;% endwith %&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225414778-1619324382.png\" alt=\"\" /></p>\n<p><strong>模板中的分类闪现小结：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">分类设置闪现内容：flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>,<span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">\t\t    flash(<span class=\"string\">&#x27;您的账户名为admin&#x27;</span>,<span class=\"string\">&quot;username&quot;</span>)</span><br><span class=\"line\">模板取值：   &#123;% <span class=\"keyword\">with</span> messages = get_flashed_messages(with_categories=true) %&#125;</span><br><span class=\"line\">            &#123;% <span class=\"keyword\">if</span> messages %&#125;</span><br><span class=\"line\">            &lt;ul class=flashes&gt;</span><br><span class=\"line\">            &#123;% <span class=\"keyword\">for</span> category, message <span class=\"keyword\">in</span> messages %&#125;</span><br><span class=\"line\">            ...</span><br><span class=\"line\">    </span><br></pre></td></tr></table></figure>\n<h4 id=\"4313-模板中过滤闪现消息\"><a class=\"markdownIt-Anchor\" href=\"#4313-模板中过滤闪现消息\"></a> 4.3.1.3 模板中过滤闪现消息</h4>\n<p>同样要使用一个自定义的分类，只要使用 <code>flash()</code> 函数的第二个参数:</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>,<span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">flash(<span class=\"string\">&#x27;您的账户名为admin&#x27;</span>,<span class=\"string\">&quot;username&quot;</span>)</span><br></pre></td></tr></table></figure>\n<p>在使用<code>get_flashed_messages()</code>时候需要传入<code>category_filter=[&quot;username&quot;]</code>便可根据类别取出闪现信息。中括号内可以传入的值就是类别，可以传入多个。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% with messages &#x3D; get_flashed_messages(category_filter&#x3D;[&quot;username&quot;]) %&#125;</span><br><span class=\"line\">&#123;% if messages %&#125;</span><br><span class=\"line\">  &lt;ul&gt;</span><br><span class=\"line\">    &#123;%- for message in messages %&#125;</span><br><span class=\"line\">    &lt;li&gt;&#123;&#123; message &#125;&#125;&lt;&#x2F;li&gt;</span><br><span class=\"line\">    &#123;% endfor -%&#125;</span><br><span class=\"line\">  &lt;&#x2F;ul&gt;</span><br><span class=\"line\">&lt;&#x2F;div&gt;</span><br><span class=\"line\">&#123;% endif %&#125;</span><br><span class=\"line\">&#123;% endwith %&#125;</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225508108-1219527274.png\" alt=\"\" /></p>\n<p><strong>小结：</strong></p>\n<h2 id=\"-code54-\"><a class=\"markdownIt-Anchor\" href=\"#-code54-\"></a> <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">分类设置闪现内容：flash(<span class=\"string\">&#x27;恭喜您登录成功&#x27;</span>,<span class=\"string\">&quot;status&quot;</span>)</span><br><span class=\"line\">\t\t    flash(<span class=\"string\">&#x27;您的账户名为admin&#x27;</span>,<span class=\"string\">&quot;username&quot;</span>)</span><br><span class=\"line\">模板取值：  % <span class=\"keyword\">with</span> messages = get_flashed_messages(category_filter=[<span class=\"string\">&quot;username&quot;</span>]) %&#125;</span><br><span class=\"line\">            &#123;% <span class=\"keyword\">if</span> messages %&#125;</span><br><span class=\"line\">              &lt;ul&gt;</span><br><span class=\"line\">                &#123;%- <span class=\"keyword\">for</span> message <span class=\"keyword\">in</span> messages %&#125;</span><br></pre></td></tr></table></figure></h2>\n<h3 id=\"432-在视图中获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#432-在视图中获取闪现信息\"></a> 4.3.2 在视图中获取闪现信息</h3>\n<h4 id=\"4321-简单的在是视图中获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#4321-简单的在是视图中获取闪现信息\"></a> 4.3.2.1 简单的在是视图中获取闪现信息</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-设置: flash(<span class=\"string\">&#x27;xxx&#x27;</span>)</span><br><span class=\"line\">-取值：get_flashed_message() <span class=\"comment\"># 注意这个不同于模板取值，这个是从flask中导入的</span></span><br><span class=\"line\">-注意：在视图中获取闪现信息不必非得是两次连续的请求，只要保证是第一次取相应的闪现信息，就可以取得到。</span><br></pre></td></tr></table></figure>\n<p><strong>示例：</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> flask <span class=\"keyword\">import</span> Flask, request, flash, get_flashed_messages</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\">app = Flask(__name__)</span><br><span class=\"line\">app.secret_key = os.urandom(<span class=\"number\">4</span>)</span><br><span class=\"line\">app.debug = <span class=\"literal\">True</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> request.args.get(<span class=\"string\">&#x27;name&#x27;</span>) == <span class=\"string\">&#x27;rocky&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;ok&#x27;</span></span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;第一条闪现信息：用户名不是rocky填写的是&#123;&#125;&#x27;</span>.<span class=\"built_in\">format</span>(request.args.get(<span class=\"string\">&#x27;name&#x27;</span>)))</span><br><span class=\"line\">    <span class=\"comment\"># flash(&#x27;第二条闪现信息：用户名不是rocky填写的是&#123;&#125;&#x27;.format(request.args.get(&#x27;name&#x27;)))</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error,设置了闪现&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/get_flash/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_flash</span>():</span></span><br><span class=\"line\">    <span class=\"comment\">#get_flashed_messages()是一个列表列表可以取出闪现信息，该条闪现信息只要被取出就会删除掉。</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;闪现的信息是&#123;&#125;&#x27;</span>.<span class=\"built_in\">format</span>(get_flashed_messages())</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/demo/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">demo</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;demo&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&#x27;__main__&#x27;</span>:</span><br><span class=\"line\">    app.run()</span><br></pre></td></tr></table></figure>\n<p>**（1）**会触发设置闪现内容</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225741600-1999590365.png\" alt=\"\" /></p>\n<p>**（2）**取出闪现内容</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225759151-1622451818.png\" alt=\"\" /></p>\n<p>**（3）**再次取出闪现内容，发现闪现内容取出一次后就为空了</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225817440-1326379837.png\" alt=\"\" /></p>\n<p><strong>小结：</strong></p>\n<ul>\n<li>get_flashed_messages()是一个列表，该列表可以取出闪现信息，该条闪现信息只要被取出就会删除掉。</li>\n</ul>\n<h4 id=\"4322-在视图中实现分类获取闪现信息\"><a class=\"markdownIt-Anchor\" href=\"#4322-在视图中实现分类获取闪现信息\"></a> 4.3.2.2 在视图中实现分类获取闪现信息。</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-设置：flash(<span class=\"string\">&#x27;用户名错误&#x27;</span>, <span class=\"string\">&quot;username_error&quot;</span>)</span><br><span class=\"line\">      flash(<span class=\"string\">&#x27;用户密码错误&#x27;</span>, <span class=\"string\">&quot;password_error&quot;</span>) <span class=\"comment\"># 第二个参数为闪现信息的分类。</span></span><br><span class=\"line\"></span><br><span class=\"line\">-取所有闪现信息的类别和闪现内容：get_flashed_messages(with_categories=<span class=\"literal\">True</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">-针对分类过滤取值：get_flashed_messages(category_filter=[<span class=\"string\">&#x27;username_error&#x27;</span>]) </span><br><span class=\"line\">\t\t\t<span class=\"comment\"># 中括号内可以写多个分类。</span></span><br><span class=\"line\">    </span><br><span class=\"line\">-注意：如果flash()没有传入第二个参数进行分类，默认分类是 <span class=\"string\">&#x27;message&#x27;</span></span><br><span class=\"line\">  </span><br></pre></td></tr></table></figure>\n<p><strong>示例1</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> request.args.get(<span class=\"string\">&#x27;name&#x27;</span>) == <span class=\"string\">&#x27;rocky&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;ok&#x27;</span></span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;用户名错误&#x27;</span>, category=<span class=\"string\">&quot;username_error&quot;</span>)</span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;用户密码错误&#x27;</span>, <span class=\"string\">&quot;password_error&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error,设置了闪现&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/get_flash/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_flash</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;闪现的信息是&#123;&#125;&#x27;</span>.<span class=\"built_in\">format</span>(get_flashed_messages(with_categories=<span class=\"literal\">True</span>))</span><br></pre></td></tr></table></figure>\n<p>把所有的闪现类别和闪现信息返回。</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225902851-1504075500.png\" alt=\"\" /></p>\n<p><strong>示例2</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/login/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">login</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> request.args.get(<span class=\"string\">&#x27;name&#x27;</span>) == <span class=\"string\">&#x27;rocky&#x27;</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">&#x27;ok&#x27;</span></span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;用户名错误&#x27;</span>, category=<span class=\"string\">&quot;username_error&quot;</span>)</span><br><span class=\"line\">    flash(<span class=\"string\">&#x27;用户密码错误&#x27;</span>, <span class=\"string\">&quot;password_error&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;error,设置了闪现&#x27;</span></span><br><span class=\"line\"><span class=\"meta\">@app.route(<span class=\"params\"><span class=\"string\">&#x27;/get_flash/&#x27;</span></span>)</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">get_flash</span>():</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">&#x27;闪现的信息是&#123;&#125;&#x27;</span>.<span class=\"built_in\">format</span>(get_flashed_messages(category_filter=[<span class=\"string\">&#x27;username_error&#x27;</span>]))</span><br></pre></td></tr></table></figure>\n<p>返回页面只显示了 <code>&quot;username_error&quot;</code>的分类内容。</p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1825659/201910/1825659-20191009225944998-1472473367.png\" alt=\"\" /></p>\n","categories":[{"name":"flask","path":"api/categories/flask.json"}],"tags":[{"name":"flask","path":"api/tags/flask.json"}]}