{"title":"Linux下的python3，virtualenv，Mysql、nginx、redis安装配置","slug":"linux 项目部署/[Linux] Linux下的python3，virtualenv，Mysql、nginx、redis安装配置","date":"2021-01-21T15:41:19.487Z","updated":"2021-01-21T15:40:51.558Z","comments":true,"path":"api/articles/linux 项目部署/[Linux] Linux下的python3，virtualenv，Mysql、nginx、redis安装配置.json","excerpt":null,"covers":["C:%5CUsers%5Cyango%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1610787339259.png","https://images2018.cnblogs.com/blog/1132884/201807/1132884-20180726113018954-757644711.png","https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140024043-914316551.png","https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140628401-1902345961.png","https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140721583-1718649859.png","https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140843664-1138395293.png","https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223141433774-1613386939.png","https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223141820442-26776716.png","https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223142058134-390931034.png","https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223142143245-586519999.png","https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223142200190-1364319425.png","https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195307153-632918138.png","https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195424153-856395118.png","https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195542012-1827075240.png","https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195608981-324219456.png"],"content":"<p>参考：<a href=\"https://www.cnblogs.com/pyyu/articles/9365054.html\">https://www.cnblogs.com/pyyu/articles/9365054.html</a></p>\n<h2 id=\"1-安装python3\"><a class=\"markdownIt-Anchor\" href=\"#1-安装python3\"></a> 1 安装python3</h2>\n<p><strong>1.1 下载python源码包</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://www.python.org/ftp/python/3.6.7/Python-3.6.7.tar.xz</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或</span></span><br><span class=\"line\">wget https://www.python.org/ftp/python/3.6.7/Python-3.6.7.tgz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 注：若找不到wget命令，输入yum install wget -y，安装其依赖将会被安装</span></span><br></pre></td></tr></table></figure>\n<p><strong>1.2 安装python前的库环境</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> yum install gcc patch libffi-devel python-devel  zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel -y</span></span><br><span class=\"line\"></span><br><span class=\"line\">&quot;直接yum install python3&quot;</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> yum install openssl-devel bzip2-devel expat-devel gdbm-devel</span></span><br><span class=\"line\">readline-devel sqlite-devel gcc gcc-c++ openssl-devel python3</span><br><span class=\"line\">python3-devel -y</span><br><span class=\"line\"></span><br><span class=\"line\">&quot;用了第3个&quot;</span><br><span class=\"line\">yum -y install openssl-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel gcc</span><br></pre></td></tr></table></figure>\n<p><strong>1.3 解压源码包</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xz -d Python-3.6.7.tar.xz # tar.xz包命令</span><br><span class=\"line\">tar -xf Python-3.6.7.tar</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或</span></span><br><span class=\"line\">tar -zxvf Python-3.6.7.tgz # tgz包用这个命令</span><br></pre></td></tr></table></figure>\n<p><strong>1.4 选择安装位置、 编译安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /usr/local/python3</span><br><span class=\"line\"></span><br><span class=\"line\">cd Python-3.6.7</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 指定安装路径（包含检查依赖）</span></span><br><span class=\"line\">./configure --prefix=/usr/local/python3  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 编译安装</span></span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>\n<p><strong>1.5  建立Python3和pip3的软链:</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /usr/local/python3/bin/python3 /usr/bin/python3</span><br><span class=\"line\"></span><br><span class=\"line\">ln -s /usr/local/python3/bin/pip3 /usr/bin/pip3</span><br></pre></td></tr></table></figure>\n<p><strong>1.6  将/usr/local/python3/bin加入PATH</strong></p>\n<p>将python3命令加入环境变量</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 编辑文件</span> </span><br><span class=\"line\">vim /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 写入以下：</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> vim ~/.bash_profile</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> .bash_profile</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Get the aliases and <span class=\"built_in\">functions</span></span></span><br><span class=\"line\">if [ -f ~/.bashrc ]; then</span><br><span class=\"line\">. ~/.bashrc</span><br><span class=\"line\">fi</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> User specific environment and startup programs</span></span><br><span class=\"line\">PATH=$PATH:$HOME/bin:/usr/local/python3/bin</span><br><span class=\"line\">export PATH</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 让命令生效</span></span><br><span class=\"line\">source ~/.bash_profile</span><br></pre></td></tr></table></figure>\n<p>检查python3、pip3是否有效</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 -V <span class=\"comment\"># v大写</span></span><br><span class=\"line\">pip3 -V</span><br></pre></td></tr></table></figure>\n<h3 id=\"python源\"><a class=\"markdownIt-Anchor\" href=\"#python源\"></a> python源</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 在~/.pip/pip.config 文件写入（无文件夹则需要创建）</span></span><br><span class=\"line\">    </span><br><span class=\"line\">[global]</span><br><span class=\"line\">index-url = http://mirrors.aliyun.com/pypi/simple/</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> index-url = https://pypi.tuna.tsinghua.edu.cn/simple/</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> index-url = http://pypi.douban.com/simple/:wq</span></span><br><span class=\"line\"></span><br><span class=\"line\">[install]</span><br><span class=\"line\">trusted-host=mirrors.aliyun.com</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-安装-配置virtualenv\"><a class=\"markdownIt-Anchor\" href=\"#2-安装-配置virtualenv\"></a> 2 安装、配置virtualenv</h2>\n<p><strong>2.1 安装、配置</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装virtualenv</span></span><br><span class=\"line\">pip3 install virtualenv </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 创建软链接</span></span><br><span class=\"line\">ln -s /usr/local/python3/bin/virtualenv /usr/bin/virtualenv</span><br></pre></td></tr></table></figure>\n<p><strong>2.2 使用</strong></p>\n<p>(1) 方法一：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 指定virtualenv创建虚拟环境的python路径(在当前目录创建)</span></span><br><span class=\"line\">virtualenv -p /usr/bin/python3 wxapp_env</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入目录</span></span><br><span class=\"line\">cd wxapp_env</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 激活虚拟环境</span></span><br><span class=\"line\">source venv/bin/activate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 退出虚拟环境</span></span><br><span class=\"line\">deactivate</span><br></pre></td></tr></table></figure>\n<p>进入虚拟环境后，如下</p>\n<p><img src=\"C:%5CUsers%5Cyango%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1610787339259.png\" alt=\"1610787339259\" /></p>\n<p>(2) 方法二：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2.创建目录</span><br><span class=\"line\">mkdir Myproject</span><br><span class=\"line\">cd Myproject</span><br><span class=\"line\"></span><br><span class=\"line\">3.创建独立运行环境-命名</span><br><span class=\"line\">virtualenv --no-site-packages --python=python3 venv #得到独立第三方包的环境，并且指定解释器是python3</span><br><span class=\"line\"></span><br><span class=\"line\">4.进入虚拟环境</span><br><span class=\"line\">source venv/bin/activate #此时进入虚拟环境(venv)Myproject</span><br><span class=\"line\"></span><br><span class=\"line\">5.安装第三方包</span><br><span class=\"line\">(venv)Myproject: pip3 install django==1.9.8</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">此时pip的包都会安装到venv环境下，venv是针对Myproject创建的</span></span><br><span class=\"line\"></span><br><span class=\"line\">6.退出venv环境</span><br><span class=\"line\">deactivate命令</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>virtualenv是如何创建“独立”的Python运行环境的呢？</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">原理：把系统Python复制一份到virtualenv的环境，用命令source venv/<span class=\"built_in\">bin</span>/activate进入一个virtualenv环境时，virtualenv会修改相关环境变量，让命令python和pip均指向当前的virtualenv环境。</span><br></pre></td></tr></table></figure>\n<h3 id=\"虚拟环境之virtualenvwrapper\"><a class=\"markdownIt-Anchor\" href=\"#虚拟环境之virtualenvwrapper\"></a> 虚拟环境之virtualenvwrapper</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">virtualenv 的一个最大的缺点就是：</span></span><br><span class=\"line\"><span class=\"string\">    每次开启虚拟环境之前要去虚拟环境所在目录下的 bin 目录下 source bin/activate ，这就需要我们记住每个虚拟环境所在的目录。(麻烦)</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\">解决方法一：</span><br><span class=\"line\">\t将所有的虚拟环境集中到一个目录下，如/opt/all_venv/</span><br><span class=\"line\"></span><br><span class=\"line\">解决方法二：</span><br><span class=\"line\">\t使用virtualenvwrapper管理你的虚拟环境（virtualenv）目录，并且省去了source的步骤。</span><br></pre></td></tr></table></figure>\n<p>(1) 安装 <code>virtualenvwrapper</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install virtualenvwrapper</span><br></pre></td></tr></table></figure>\n<p>(2) 设置Linux的环境变量，每次启动就加载 <code>virtualenvwrapper</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 把下面两行代码添加到 ~/.bashrc文件中</span></span><br><span class=\"line\">vim ~/.bashrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 写入以下两行代码</span></span><br><span class=\"line\">export WORKON_HOME=~/Envs                                      #设置virtualenv的统一管理目录</span><br><span class=\"line\">export VIRTUALENVWRAPPER_VIRTUALENV_ARGS=&#x27;--no-site-packages&#x27;  #添加virtualenvwrapper的参数，生成干净隔绝的环境</span><br><span class=\"line\">export VIRTUALENVWRAPPER_PYTHON=/opt/python347/bin/python3     #指定python解释器</span><br><span class=\"line\">source /opt/python34/bin/virtualenvwrapper.sh                  #执行virtualenvwrapper安装脚本</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 读取文件，使得生效，此时已经可以使用virtalenvwrapper</span></span><br><span class=\"line\">source ~/.bashrc</span><br></pre></td></tr></table></figure>\n<p>(3) 基本使用 <code>virtualenvwrapper</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 创建一个虚拟环境：</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkvirtualenv my_django115   <span class=\"comment\"># 这会在 ~/Envs 中创建 my_django115 文件夹。</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 在虚拟环境上工作：激活虚拟环境my_django115</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> workon my_django115</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 再创建一个新的虚拟环境</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkvirtualenv my_django2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> virtualenvwrapper 提供环境名字的tab补全功能。 当有很多环境， 并且很难记住它们的名字时，这就显得很有用。</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> workon切换环境：还可以停止你当前的环境，可以在多个虚拟环境中来回切换</span></span><br><span class=\"line\">workon django1.15</span><br><span class=\"line\">workon django2.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 也可以手动停止虚拟环境</span></span><br><span class=\"line\">deactivate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 删除虚拟环境，需要先退出虚拟环境</span></span><br><span class=\"line\">rmvirtualenv my_django115</span><br></pre></td></tr></table></figure>\n<p>(4)  常用其他命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">列举所有的环境</span></span><br><span class=\"line\">lsvirtualenv</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 导航到当前激活的虚拟环境的目录中，比如说这样您就能够浏览它的 site-packages 。</span></span><br><span class=\"line\">cdvirtualenv</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 和上面的类似，但是是直接进入到 site-packages 目录中。</span></span><br><span class=\"line\">cdsitepackages</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 显示 site-packages 目录中的内容。</span></span><br><span class=\"line\">lssitepackages</span><br></pre></td></tr></table></figure>\n<p>图解<img src=\"https://images2018.cnblogs.com/blog/1132884/201807/1132884-20180726113018954-757644711.png\" alt=\"img\" /></p>\n<h2 id=\"3-mysql\"><a class=\"markdownIt-Anchor\" href=\"#3-mysql\"></a> 3 Mysql</h2>\n<p>CentOS7默认使用<strong>MariaDB</strong>(Mysql的一个开源分支)</p>\n<p>这里是使用Mysql</p>\n<h3 id=\"31-安装mysql\"><a class=\"markdownIt-Anchor\" href=\"#31-安装mysql\"></a> <strong>3.1 安装Mysql</strong></h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 删除默认的mariadb数据库</span></span><br><span class=\"line\">yum remove mariadb-lib.x86_64</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 下载Mysql源包</span></span><br><span class=\"line\">wget https://repo.mysql.com/mysql57-community-release-el7-10.noarch.rpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装Mysql客户端</span></span><br><span class=\"line\">yum -y localinstall mysql57-community-release-el7-10.noarch.rpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装Mysql服务器</span></span><br><span class=\"line\">yum -y install mysql-community-server</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"32-mysql数据库配置\"><a class=\"markdownIt-Anchor\" href=\"#32-mysql数据库配置\"></a> <strong>3.2 Mysql数据库配置</strong></h3>\n<p>(1) 启动Mysql</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysqld start/restart # 实际执行的是以下命令</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或</span></span><br><span class=\"line\">systemctl start mysqld.service</span><br></pre></td></tr></table></figure>\n<p>(2) 查看Mysql运行状态</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status mysqld.service</span><br></pre></td></tr></table></figure>\n<p>(3) 正常运行状态，则找出此时的root用户密码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep &quot;password&quot; /var/log/mysqld.log</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140024043-914316551.png\" alt=\"img\" /></p>\n<p>(4) 首次登录数据库前，需修改密码</p>\n<p>登录数据库</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> mysql -uroot -p</span></span><br><span class=\"line\">Enter password: # 输入上一步获得的临时密码</span><br></pre></td></tr></table></figure>\n<h4 id=\"重置mysql密码-方法一\"><a class=\"markdownIt-Anchor\" href=\"#重置mysql密码-方法一\"></a> 重置Mysql密码 (方法一)</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;新密码&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>若密码的复杂度不符合默认规定，如下命令查看mysql默认密码复杂度：</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW VARIABLES LIKE &#39;validate_password%&#39;;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140628401-1902345961.png\" alt=\"img\" /></p>\n<ul>\n<li>如需修改密码复杂度参考如下命令：  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set global validate_password_policy&#x3D;LOW;</span><br></pre></td></tr></table></figure>\n<img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140721583-1718649859.png\" alt=\"img\" />  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set global validate_password_length&#x3D;6;</span><br></pre></td></tr></table></figure>\n<img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140843664-1138395293.png\" alt=\"img\" /></li>\n</ul>\n<h3 id=\"\"><a class=\"markdownIt-Anchor\" href=\"#\"></a> </h3>\n<h4 id=\"重置mysql密码-方法二\"><a class=\"markdownIt-Anchor\" href=\"#重置mysql密码-方法二\"></a> 重置Mysql密码 (方法二)</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /var/log/mysqld.log |grep &#x27;password&#x27; # 查看默认密码</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 登录mysql</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> mysql -uroot -p</span></span><br><span class=\"line\">Enter password: # 输出默认的密码 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> sql语句操纵</span></span><br><span class=\"line\">SET PASSWORD = PASSWORD(&#x27;123456&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 报错-修改安全策略</span></span><br><span class=\"line\">set global validate_password_policy=0;</span><br><span class=\"line\">set global validate_password_length=1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 重设密码</span> </span><br><span class=\"line\">SET PASSWORD = PASSWORD(&#x27;123456&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 设置登录永久有效（不过期）</span></span><br><span class=\"line\">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; PASSWORD EXPIRE NEVER; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 刷新权限</span></span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n<h3 id=\"33-开启mysql的远程访问\"><a class=\"markdownIt-Anchor\" href=\"#33-开启mysql的远程访问\"></a> <strong>3.3 开启mysql的远程访问</strong></h3>\n<p>执行以下命令开启远程访问限制（注意：下面命令开启的IP是 192.168.19.128，如要开启所有的，用%代替IP）：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grant all privileges on *.* to &#x27;root&#x27;@&#x27;192.168.0.1&#x27; identified by &#x27;远程访问密码&#x27; with grant option;</span><br></pre></td></tr></table></figure>\n<p><strong>注：password–是你设置你的mysql远程登录密码。</strong></p>\n<p>然后再输入下面两行命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> flush privileges;</span></span><br></pre></td></tr></table></figure>\n<p>此步操作，退出mysql也可以。具体参考：</p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223141433774-1613386939.png\" alt=\"img\" /></p>\n<h3 id=\"34-开启防火墙端口centos为firewalld添加开放端口3306\"><a class=\"markdownIt-Anchor\" href=\"#34-开启防火墙端口centos为firewalld添加开放端口3306\"></a> <strong>3.4 开启防火墙端口，CentOS为firewalld添加开放端口3306</strong></h3>\n<h3 id=\"35-更改mysql语言编码方式为utf8\"><a class=\"markdownIt-Anchor\" href=\"#35-更改mysql语言编码方式为utf8\"></a> <strong>3.5 更改mysql语言编码方式为<code>utf8</code></strong></h3>\n<p>首先重新登录mysql，然后输入status：</p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223141820442-26776716.png\" alt=\"img\" /></p>\n<p>到/etc目录下的my.cnf文件下修改一下文件内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;etc&#x2F;my.cnf</span><br></pre></td></tr></table></figure>\n<p>新增四行代码：</p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223142058134-390931034.png\" alt=\"img\" /></p>\n<p>保存更改后的my.cnf文件后，重启下mysql，然后输入status再次查看</p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223142143245-586519999.png\" alt=\"img\" /></p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223142200190-1364319425.png\" alt=\"img\" /></p>\n<h2 id=\"4-python操作redis\"><a class=\"markdownIt-Anchor\" href=\"#4-python操作redis\"></a> 4 python操作redis</h2>\n<p><strong>4.1 简介</strong></p>\n<p>​\t<strong>redis</strong>是一个<strong>缓存数据库</strong>，支持<strong>key-value</strong>存储方式。</p>\n<p>​\t\t支持的value类型多：<strong>string</strong>(字符串), <strong>list</strong>(链表), <strong>set</strong>(集合), <strong>hash</strong>(哈希类型)</p>\n<pre><code>\tredis会**周期性**的**把更新的数据写入磁盘**或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。 \n</code></pre>\n<p><strong>4.2 安装redis</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install redis -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或者</span></span><br><span class=\"line\">wget http://download.redis.io/releases/redis-3.0.6.tar.gz</span><br><span class=\"line\">tar xzf redis-3.0.6.tar.gz</span><br><span class=\"line\">cd redis-3.0.6</span><br><span class=\"line\">make</span><br></pre></td></tr></table></figure>\n<p><strong>4.3 启动redis</strong></p>\n<p>​\t这里注意对配置文件修改</p>\n<p>​\t打开注释，不然py客户端连不上　　<img src=\"https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195307153-632918138.png\" alt=\"img\" /></p>\n<p>​\t指定配置文件进行启动　　<img src=\"https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195424153-856395118.png\" alt=\"img\" /></p>\n<p>​\t然后准备设置redis验证密码（不然py连接报错）<img src=\"https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195542012-1827075240.png\" alt=\"img\" /></p>\n<p>​\t退出，重新登录redis　　<img src=\"https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195608981-324219456.png\" alt=\"img\" /></p>\n<p><strong>4.4 python操作redis</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python </span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding:utf8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> redis</span><br><span class=\"line\"></span><br><span class=\"line\">r = redis.Redis(host=<span class=\"string\">&#x27;192.168.11.122&#x27;</span>,password=<span class=\"string\">&#x27;123123&#x27;</span>,port=<span class=\"number\">6379</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">r.<span class=\"built_in\">set</span>(<span class=\"string\">&#x27;foo&#x27;</span>, <span class=\"string\">&#x27;Bar&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> (r.get(<span class=\"string\">&#x27;foo&#x27;</span>))</span><br></pre></td></tr></table></figure>\n<p><strong>4.5 线程池操作redis</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">redis-py 使用connection pool 来管理对一个redis server的所有连接，避免每次建立，释放连接的开销</span></span><br><span class=\"line\"><span class=\"string\">默认 每个redis实例都会维护一个自己的链接池,然后作为参数redis,这样就可以实现多个redis 实例共享一个连接池</span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> redis</span><br><span class=\"line\"></span><br><span class=\"line\">pool = redis.ConnectionPool(host=<span class=\"string\">&#x27;192.168.11.122&#x27;</span>,password=<span class=\"string\">&#x27;123123&#x27;</span>,port=<span class=\"number\">6379</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">r = redis.Redis(connection_pool=pool)</span><br><span class=\"line\">r.<span class=\"built_in\">set</span>(<span class=\"string\">&#x27;name&#x27;</span>,<span class=\"string\">&#x27;Yu chao&#x27;</span>)</span><br><span class=\"line\">print(r.get(<span class=\"string\">&#x27;name&#x27;</span>))</span><br></pre></td></tr></table></figure>\n","more":"<p>参考：<a href=\"https://www.cnblogs.com/pyyu/articles/9365054.html\">https://www.cnblogs.com/pyyu/articles/9365054.html</a></p>\n<h2 id=\"1-安装python3\"><a class=\"markdownIt-Anchor\" href=\"#1-安装python3\"></a> 1 安装python3</h2>\n<p><strong>1.1 下载python源码包</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://www.python.org/ftp/python/3.6.7/Python-3.6.7.tar.xz</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或</span></span><br><span class=\"line\">wget https://www.python.org/ftp/python/3.6.7/Python-3.6.7.tgz</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 注：若找不到wget命令，输入yum install wget -y，安装其依赖将会被安装</span></span><br></pre></td></tr></table></figure>\n<p><strong>1.2 安装python前的库环境</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> yum install gcc patch libffi-devel python-devel  zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel -y</span></span><br><span class=\"line\"></span><br><span class=\"line\">&quot;直接yum install python3&quot;</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> yum install openssl-devel bzip2-devel expat-devel gdbm-devel</span></span><br><span class=\"line\">readline-devel sqlite-devel gcc gcc-c++ openssl-devel python3</span><br><span class=\"line\">python3-devel -y</span><br><span class=\"line\"></span><br><span class=\"line\">&quot;用了第3个&quot;</span><br><span class=\"line\">yum -y install openssl-devel bzip2-devel expat-devel gdbm-devel readline-devel sqlite-devel gcc</span><br></pre></td></tr></table></figure>\n<p><strong>1.3 解压源码包</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">xz -d Python-3.6.7.tar.xz # tar.xz包命令</span><br><span class=\"line\">tar -xf Python-3.6.7.tar</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或</span></span><br><span class=\"line\">tar -zxvf Python-3.6.7.tgz # tgz包用这个命令</span><br></pre></td></tr></table></figure>\n<p><strong>1.4 选择安装位置、 编译安装</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir -p /usr/local/python3</span><br><span class=\"line\"></span><br><span class=\"line\">cd Python-3.6.7</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 指定安装路径（包含检查依赖）</span></span><br><span class=\"line\">./configure --prefix=/usr/local/python3  </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 编译安装</span></span><br><span class=\"line\">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>\n<p><strong>1.5  建立Python3和pip3的软链:</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln -s /usr/local/python3/bin/python3 /usr/bin/python3</span><br><span class=\"line\"></span><br><span class=\"line\">ln -s /usr/local/python3/bin/pip3 /usr/bin/pip3</span><br></pre></td></tr></table></figure>\n<p><strong>1.6  将/usr/local/python3/bin加入PATH</strong></p>\n<p>将python3命令加入环境变量</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 编辑文件</span> </span><br><span class=\"line\">vim /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 写入以下：</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> vim ~/.bash_profile</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> .bash_profile</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Get the aliases and <span class=\"built_in\">functions</span></span></span><br><span class=\"line\">if [ -f ~/.bashrc ]; then</span><br><span class=\"line\">. ~/.bashrc</span><br><span class=\"line\">fi</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> User specific environment and startup programs</span></span><br><span class=\"line\">PATH=$PATH:$HOME/bin:/usr/local/python3/bin</span><br><span class=\"line\">export PATH</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 让命令生效</span></span><br><span class=\"line\">source ~/.bash_profile</span><br></pre></td></tr></table></figure>\n<p>检查python3、pip3是否有效</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">python3 -V <span class=\"comment\"># v大写</span></span><br><span class=\"line\">pip3 -V</span><br></pre></td></tr></table></figure>\n<h3 id=\"python源\"><a class=\"markdownIt-Anchor\" href=\"#python源\"></a> python源</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 在~/.pip/pip.config 文件写入（无文件夹则需要创建）</span></span><br><span class=\"line\">    </span><br><span class=\"line\">[global]</span><br><span class=\"line\">index-url = http://mirrors.aliyun.com/pypi/simple/</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> index-url = https://pypi.tuna.tsinghua.edu.cn/simple/</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> index-url = http://pypi.douban.com/simple/:wq</span></span><br><span class=\"line\"></span><br><span class=\"line\">[install]</span><br><span class=\"line\">trusted-host=mirrors.aliyun.com</span><br></pre></td></tr></table></figure>\n<h2 id=\"2-安装-配置virtualenv\"><a class=\"markdownIt-Anchor\" href=\"#2-安装-配置virtualenv\"></a> 2 安装、配置virtualenv</h2>\n<p><strong>2.1 安装、配置</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装virtualenv</span></span><br><span class=\"line\">pip3 install virtualenv </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 创建软链接</span></span><br><span class=\"line\">ln -s /usr/local/python3/bin/virtualenv /usr/bin/virtualenv</span><br></pre></td></tr></table></figure>\n<p><strong>2.2 使用</strong></p>\n<p>(1) 方法一：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 指定virtualenv创建虚拟环境的python路径(在当前目录创建)</span></span><br><span class=\"line\">virtualenv -p /usr/bin/python3 wxapp_env</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 进入目录</span></span><br><span class=\"line\">cd wxapp_env</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 激活虚拟环境</span></span><br><span class=\"line\">source venv/bin/activate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 退出虚拟环境</span></span><br><span class=\"line\">deactivate</span><br></pre></td></tr></table></figure>\n<p>进入虚拟环境后，如下</p>\n<p><img src=\"C:%5CUsers%5Cyango%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1610787339259.png\" alt=\"1610787339259\" /></p>\n<p>(2) 方法二：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2.创建目录</span><br><span class=\"line\">mkdir Myproject</span><br><span class=\"line\">cd Myproject</span><br><span class=\"line\"></span><br><span class=\"line\">3.创建独立运行环境-命名</span><br><span class=\"line\">virtualenv --no-site-packages --python=python3 venv #得到独立第三方包的环境，并且指定解释器是python3</span><br><span class=\"line\"></span><br><span class=\"line\">4.进入虚拟环境</span><br><span class=\"line\">source venv/bin/activate #此时进入虚拟环境(venv)Myproject</span><br><span class=\"line\"></span><br><span class=\"line\">5.安装第三方包</span><br><span class=\"line\">(venv)Myproject: pip3 install django==1.9.8</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">此时pip的包都会安装到venv环境下，venv是针对Myproject创建的</span></span><br><span class=\"line\"></span><br><span class=\"line\">6.退出venv环境</span><br><span class=\"line\">deactivate命令</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>virtualenv是如何创建“独立”的Python运行环境的呢？</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">原理：把系统Python复制一份到virtualenv的环境，用命令source venv/<span class=\"built_in\">bin</span>/activate进入一个virtualenv环境时，virtualenv会修改相关环境变量，让命令python和pip均指向当前的virtualenv环境。</span><br></pre></td></tr></table></figure>\n<h3 id=\"虚拟环境之virtualenvwrapper\"><a class=\"markdownIt-Anchor\" href=\"#虚拟环境之virtualenvwrapper\"></a> 虚拟环境之virtualenvwrapper</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\"><span class=\"string\">virtualenv 的一个最大的缺点就是：</span></span><br><span class=\"line\"><span class=\"string\">    每次开启虚拟环境之前要去虚拟环境所在目录下的 bin 目录下 source bin/activate ，这就需要我们记住每个虚拟环境所在的目录。(麻烦)</span></span><br><span class=\"line\"><span class=\"string\">&quot;&quot;&quot;</span></span><br><span class=\"line\">解决方法一：</span><br><span class=\"line\">\t将所有的虚拟环境集中到一个目录下，如/opt/all_venv/</span><br><span class=\"line\"></span><br><span class=\"line\">解决方法二：</span><br><span class=\"line\">\t使用virtualenvwrapper管理你的虚拟环境（virtualenv）目录，并且省去了source的步骤。</span><br></pre></td></tr></table></figure>\n<p>(1) 安装 <code>virtualenvwrapper</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip3 install virtualenvwrapper</span><br></pre></td></tr></table></figure>\n<p>(2) 设置Linux的环境变量，每次启动就加载 <code>virtualenvwrapper</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 把下面两行代码添加到 ~/.bashrc文件中</span></span><br><span class=\"line\">vim ~/.bashrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 写入以下两行代码</span></span><br><span class=\"line\">export WORKON_HOME=~/Envs                                      #设置virtualenv的统一管理目录</span><br><span class=\"line\">export VIRTUALENVWRAPPER_VIRTUALENV_ARGS=&#x27;--no-site-packages&#x27;  #添加virtualenvwrapper的参数，生成干净隔绝的环境</span><br><span class=\"line\">export VIRTUALENVWRAPPER_PYTHON=/opt/python347/bin/python3     #指定python解释器</span><br><span class=\"line\">source /opt/python34/bin/virtualenvwrapper.sh                  #执行virtualenvwrapper安装脚本</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 读取文件，使得生效，此时已经可以使用virtalenvwrapper</span></span><br><span class=\"line\">source ~/.bashrc</span><br></pre></td></tr></table></figure>\n<p>(3) 基本使用 <code>virtualenvwrapper</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 创建一个虚拟环境：</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkvirtualenv my_django115   <span class=\"comment\"># 这会在 ~/Envs 中创建 my_django115 文件夹。</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 在虚拟环境上工作：激活虚拟环境my_django115</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> workon my_django115</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 再创建一个新的虚拟环境</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> mkvirtualenv my_django2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> virtualenvwrapper 提供环境名字的tab补全功能。 当有很多环境， 并且很难记住它们的名字时，这就显得很有用。</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> workon切换环境：还可以停止你当前的环境，可以在多个虚拟环境中来回切换</span></span><br><span class=\"line\">workon django1.15</span><br><span class=\"line\">workon django2.0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 也可以手动停止虚拟环境</span></span><br><span class=\"line\">deactivate</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 删除虚拟环境，需要先退出虚拟环境</span></span><br><span class=\"line\">rmvirtualenv my_django115</span><br></pre></td></tr></table></figure>\n<p>(4)  常用其他命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">列举所有的环境</span></span><br><span class=\"line\">lsvirtualenv</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 导航到当前激活的虚拟环境的目录中，比如说这样您就能够浏览它的 site-packages 。</span></span><br><span class=\"line\">cdvirtualenv</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 和上面的类似，但是是直接进入到 site-packages 目录中。</span></span><br><span class=\"line\">cdsitepackages</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 显示 site-packages 目录中的内容。</span></span><br><span class=\"line\">lssitepackages</span><br></pre></td></tr></table></figure>\n<p>图解<img src=\"https://images2018.cnblogs.com/blog/1132884/201807/1132884-20180726113018954-757644711.png\" alt=\"img\" /></p>\n<h2 id=\"3-mysql\"><a class=\"markdownIt-Anchor\" href=\"#3-mysql\"></a> 3 Mysql</h2>\n<p>CentOS7默认使用<strong>MariaDB</strong>(Mysql的一个开源分支)</p>\n<p>这里是使用Mysql</p>\n<h3 id=\"31-安装mysql\"><a class=\"markdownIt-Anchor\" href=\"#31-安装mysql\"></a> <strong>3.1 安装Mysql</strong></h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 删除默认的mariadb数据库</span></span><br><span class=\"line\">yum remove mariadb-lib.x86_64</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 下载Mysql源包</span></span><br><span class=\"line\">wget https://repo.mysql.com/mysql57-community-release-el7-10.noarch.rpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装Mysql客户端</span></span><br><span class=\"line\">yum -y localinstall mysql57-community-release-el7-10.noarch.rpm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装Mysql服务器</span></span><br><span class=\"line\">yum -y install mysql-community-server</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<h3 id=\"32-mysql数据库配置\"><a class=\"markdownIt-Anchor\" href=\"#32-mysql数据库配置\"></a> <strong>3.2 Mysql数据库配置</strong></h3>\n<p>(1) 启动Mysql</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">service mysqld start/restart # 实际执行的是以下命令</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或</span></span><br><span class=\"line\">systemctl start mysqld.service</span><br></pre></td></tr></table></figure>\n<p>(2) 查看Mysql运行状态</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status mysqld.service</span><br></pre></td></tr></table></figure>\n<p>(3) 正常运行状态，则找出此时的root用户密码</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep &quot;password&quot; /var/log/mysqld.log</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140024043-914316551.png\" alt=\"img\" /></p>\n<p>(4) 首次登录数据库前，需修改密码</p>\n<p>登录数据库</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> mysql -uroot -p</span></span><br><span class=\"line\">Enter password: # 输入上一步获得的临时密码</span><br></pre></td></tr></table></figure>\n<h4 id=\"重置mysql密码-方法一\"><a class=\"markdownIt-Anchor\" href=\"#重置mysql密码-方法一\"></a> 重置Mysql密码 (方法一)</h4>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">ALTER</span> <span class=\"keyword\">USER</span> <span class=\"string\">&#x27;root&#x27;</span>@<span class=\"string\">&#x27;localhost&#x27;</span> IDENTIFIED <span class=\"keyword\">BY</span> <span class=\"string\">&#x27;新密码&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>\n<p>若密码的复杂度不符合默认规定，如下命令查看mysql默认密码复杂度：</p>\n  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SHOW VARIABLES LIKE &#39;validate_password%&#39;;</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140628401-1902345961.png\" alt=\"img\" /></p>\n<ul>\n<li>如需修改密码复杂度参考如下命令：  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set global validate_password_policy&#x3D;LOW;</span><br></pre></td></tr></table></figure>\n<img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140721583-1718649859.png\" alt=\"img\" />  <figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set global validate_password_length&#x3D;6;</span><br></pre></td></tr></table></figure>\n<img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223140843664-1138395293.png\" alt=\"img\" /></li>\n</ul>\n<h3 id=\"\"><a class=\"markdownIt-Anchor\" href=\"#\"></a> </h3>\n<h4 id=\"重置mysql密码-方法二\"><a class=\"markdownIt-Anchor\" href=\"#重置mysql密码-方法二\"></a> 重置Mysql密码 (方法二)</h4>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat /var/log/mysqld.log |grep &#x27;password&#x27; # 查看默认密码</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 登录mysql</span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> mysql -uroot -p</span></span><br><span class=\"line\">Enter password: # 输出默认的密码 </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> sql语句操纵</span></span><br><span class=\"line\">SET PASSWORD = PASSWORD(&#x27;123456&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 报错-修改安全策略</span></span><br><span class=\"line\">set global validate_password_policy=0;</span><br><span class=\"line\">set global validate_password_length=1;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 重设密码</span> </span><br><span class=\"line\">SET PASSWORD = PASSWORD(&#x27;123456&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 设置登录永久有效（不过期）</span></span><br><span class=\"line\">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; PASSWORD EXPIRE NEVER; </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 刷新权限</span></span><br><span class=\"line\">flush privileges;</span><br></pre></td></tr></table></figure>\n<h3 id=\"33-开启mysql的远程访问\"><a class=\"markdownIt-Anchor\" href=\"#33-开启mysql的远程访问\"></a> <strong>3.3 开启mysql的远程访问</strong></h3>\n<p>执行以下命令开启远程访问限制（注意：下面命令开启的IP是 192.168.19.128，如要开启所有的，用%代替IP）：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grant all privileges on *.* to &#x27;root&#x27;@&#x27;192.168.0.1&#x27; identified by &#x27;远程访问密码&#x27; with grant option;</span><br></pre></td></tr></table></figure>\n<p><strong>注：password–是你设置你的mysql远程登录密码。</strong></p>\n<p>然后再输入下面两行命令</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">mysql&gt;</span><span class=\"bash\"> flush privileges;</span></span><br></pre></td></tr></table></figure>\n<p>此步操作，退出mysql也可以。具体参考：</p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223141433774-1613386939.png\" alt=\"img\" /></p>\n<h3 id=\"34-开启防火墙端口centos为firewalld添加开放端口3306\"><a class=\"markdownIt-Anchor\" href=\"#34-开启防火墙端口centos为firewalld添加开放端口3306\"></a> <strong>3.4 开启防火墙端口，CentOS为firewalld添加开放端口3306</strong></h3>\n<h3 id=\"35-更改mysql语言编码方式为utf8\"><a class=\"markdownIt-Anchor\" href=\"#35-更改mysql语言编码方式为utf8\"></a> <strong>3.5 更改mysql语言编码方式为<code>utf8</code></strong></h3>\n<p>首先重新登录mysql，然后输入status：</p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223141820442-26776716.png\" alt=\"img\" /></p>\n<p>到/etc目录下的my.cnf文件下修改一下文件内容</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vim &#x2F;etc&#x2F;my.cnf</span><br></pre></td></tr></table></figure>\n<p>新增四行代码：</p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223142058134-390931034.png\" alt=\"img\" /></p>\n<p>保存更改后的my.cnf文件后，重启下mysql，然后输入status再次查看</p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223142143245-586519999.png\" alt=\"img\" /></p>\n<p><img src=\"https://img2018.cnblogs.com/i-beta/1780831/202002/1780831-20200223142200190-1364319425.png\" alt=\"img\" /></p>\n<h2 id=\"4-python操作redis\"><a class=\"markdownIt-Anchor\" href=\"#4-python操作redis\"></a> 4 python操作redis</h2>\n<p><strong>4.1 简介</strong></p>\n<p>​\t<strong>redis</strong>是一个<strong>缓存数据库</strong>，支持<strong>key-value</strong>存储方式。</p>\n<p>​\t\t支持的value类型多：<strong>string</strong>(字符串), <strong>list</strong>(链表), <strong>set</strong>(集合), <strong>hash</strong>(哈希类型)</p>\n<pre><code>\tredis会**周期性**的**把更新的数据写入磁盘**或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。 \n</code></pre>\n<p><strong>4.2 安装redis</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install redis -y</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或者</span></span><br><span class=\"line\">wget http://download.redis.io/releases/redis-3.0.6.tar.gz</span><br><span class=\"line\">tar xzf redis-3.0.6.tar.gz</span><br><span class=\"line\">cd redis-3.0.6</span><br><span class=\"line\">make</span><br></pre></td></tr></table></figure>\n<p><strong>4.3 启动redis</strong></p>\n<p>​\t这里注意对配置文件修改</p>\n<p>​\t打开注释，不然py客户端连不上　　<img src=\"https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195307153-632918138.png\" alt=\"img\" /></p>\n<p>​\t指定配置文件进行启动　　<img src=\"https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195424153-856395118.png\" alt=\"img\" /></p>\n<p>​\t然后准备设置redis验证密码（不然py连接报错）<img src=\"https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195542012-1827075240.png\" alt=\"img\" /></p>\n<p>​\t退出，重新登录redis　　<img src=\"https://images2015.cnblogs.com/blog/1132884/201706/1132884-20170608195608981-324219456.png\" alt=\"img\" /></p>\n<p><strong>4.4 python操作redis</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env python </span></span><br><span class=\"line\"><span class=\"comment\"># -*- coding:utf8 -*-</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> redis</span><br><span class=\"line\"></span><br><span class=\"line\">r = redis.Redis(host=<span class=\"string\">&#x27;192.168.11.122&#x27;</span>,password=<span class=\"string\">&#x27;123123&#x27;</span>,port=<span class=\"number\">6379</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">r.<span class=\"built_in\">set</span>(<span class=\"string\">&#x27;foo&#x27;</span>, <span class=\"string\">&#x27;Bar&#x27;</span>)</span><br><span class=\"line\"><span class=\"built_in\">print</span> (r.get(<span class=\"string\">&#x27;foo&#x27;</span>))</span><br></pre></td></tr></table></figure>\n<p><strong>4.5 线程池操作redis</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"string\">redis-py 使用connection pool 来管理对一个redis server的所有连接，避免每次建立，释放连接的开销</span></span><br><span class=\"line\"><span class=\"string\">默认 每个redis实例都会维护一个自己的链接池,然后作为参数redis,这样就可以实现多个redis 实例共享一个连接池</span></span><br><span class=\"line\"><span class=\"string\">&#x27;&#x27;&#x27;</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> redis</span><br><span class=\"line\"></span><br><span class=\"line\">pool = redis.ConnectionPool(host=<span class=\"string\">&#x27;192.168.11.122&#x27;</span>,password=<span class=\"string\">&#x27;123123&#x27;</span>,port=<span class=\"number\">6379</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">r = redis.Redis(connection_pool=pool)</span><br><span class=\"line\">r.<span class=\"built_in\">set</span>(<span class=\"string\">&#x27;name&#x27;</span>,<span class=\"string\">&#x27;Yu chao&#x27;</span>)</span><br><span class=\"line\">print(r.get(<span class=\"string\">&#x27;name&#x27;</span>))</span><br></pre></td></tr></table></figure>\n","categories":[{"name":"linux","path":"api/categories/linux.json"}],"tags":[{"name":"linux","path":"api/tags/linux.json"}]}